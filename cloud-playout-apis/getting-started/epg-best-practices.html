---
title: 'EPG-API: Empfohlene Vorgehensweise'
parent: Getting Started 
grandparent: Cloud Playout APIs
description: This topic provides best practices for working with the Cloud Playout EPG API.
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
	<summary>{{page.description}}</summary>
	<section class="bcls-section">
		<h2 id="Introduction">Einführung</h2>
		<p>Die EPG-API gibt einen elektronischen XML-Programmierleitfaden für einen Cloud-Playout-Kanal zurück, der zum Anzeigen von Programminformationen auf Ihrer Webseite oder in Ihrer App nützlich ist. Dieses Thema enthält einige Erläuterungen zur Funktionsweise der API und Empfehlungen zu ihrer effektivsten Verwendung.</p>
	</section>
	<section class="bcls-section">
		<h2 id="channel_states">Kanalzustände</h2>
		<h3>Aktive Zustände</h3>
		<ul>
			<li><code translate="no">LUFTZUG</code> (Wenn die geplante Startzeit/Endzeit des Kanals in der Zukunft liegt)</li>
			<li><code translate="no">NEUPLANUNG</code></li>
			<li><code translate="no">GEPLANT</code></li>
			<li><code translate="no">BEGINNEND</code></li>
			<li>START_ERROR<code translate="no"></code></li>
			<li><code translate="no">ERSTELLEN</code></li>
			<li>CREATE_ERROR<code translate="no"></code></li>
			<li><code translate="no">LAUFEN</code></li>
		</ul>
		<h3>Inaktive Zustände</h3>
		<ul>
			<li><code translate="no">LUFTZUG</code> (Gestoppte Kanäle gehen wieder in den DRAFT-Zustand über)</li>
			<li><code translate="no">LEERLAUF</code></li>
			<li><code translate="no">STOPPEN</code></li>
			<li>STOP_ERROR<code translate="no"></code></li>
			<li>START_ERROR<code translate="no"></code></li>
			<li><code translate="no">LÖSCHEN</code> (es werden keine EPG-Einträge vorhanden sein - dies kann dazu führen, dass die EPG-API einen 500-Antwortcode zurückgibt)</li>
			<li><code translate="no">DELETE_ERROR</code> (es werden keine EPG-Einträge vorhanden sein - dies kann dazu führen, dass die EPG-API einen 500-Antwortcode zurückgibt)</li>
		</ul>
	</section>
	<section class="bcls-section">
		<h2 id="EPG_Query_Recommendation">Empfehlung für EPG-Abfragen</h2>
		<ul>
			<li>Die EPG-Abfrage standardmäßig (ohne Abfrageparameter für <code translate="No">start</code> , <code translate="No">stop</code> , oder <code translate="No"></code>Grenze</code> geliefert) gibt 100 EPG-Datensätze zurück (oder alle Datensätze, wenn weniger als 100 vorhanden sind). Die zurückgegebene Nummer kann geändert werden, indem Sie sie im <code translate="no">Grenze</code> Parameter.</li>
			<li>Datensätze für bis zu 14 Tage werden weiterhin bereitgestellt, indem eine explizite Start- und Endzeit sowie ein höherer Grenzwert für die EPG-Abfrage angegeben werden.</li>
			<li>Da die Verarbeitungszeit mit der Anzahl der zu verarbeitenden Datensätze exponentiell ansteigt, empfehlen wir eine paginierte Abfrage von EPG-Datensätzen (siehe <a href="#pagination">Seitennummerierung</a> unten) zum Abrufen von Massendaten.</li>
		</ul>
	</section>
	<section class="bcls-section">
		<h2 id="pagination">Seitennummerierung</h2>
		<p>Wir empfehlen Ihnen, Ihre Abfragen für eine große Anzahl von Datensätzen wie folgt zu paginieren, um die beste Leistung zu erzielen:</p>
		<ol class="bcls-tasklist-restart">
			<li>
				Beginnen Sie mit einer Anfrage ohne Abfrageparameter:
<pre><code class="language-http" translate="No">https://sm.cloudplayout.brightcove.com/accounts/<span class="bcls-input">{account_id}</span>/channels/<span class="bcls-input">{channel_id}</span>/epg
				</code></pre>
				<ul>
					<li>Wenn der Kanal nicht ausgeführt wird, werden 100 Datensätze ab der Startzeit des Kanals oder der aktuellen Zeit zurückgegeben, je nachdem, was später eintritt.</li>
					<li>Wenn der Kanal läuft, sind die 100 Datensätze eine 50/50-Mischung aus historischen und zukünftigen Programmen</li>
				</ul>
			</li>
			<li>Für zusätzliche Seiten mit Daten senden Sie eine Anfrage mit dem <code translate="no">Anfang</code> Parametersatz gleich dem <code translate="no">halt</code> Attributwert in der <code translate="no">Programm</code> Tag des letzten Datensatzes, der in der vorherigen Antwort zurückgegeben wurde - <strong>plus 1 Sekunde</strong>.</li>
	</ol>
	<h3>Beispiel</h3>
	<p>Angenommen, Ihre erste Abfrage gibt eine Antwort wie diese zurück:</p>
<pre class="line-numbers"><code class="language-xml">&lt;tv&gt; ... &lt;programm channel="channel_id" start="20210228000457" stop="<span class="bcls-highlight">20210228001457</span>"&gt; &lt;title&gt;live&lt;/title&gt; &lt;desc&gt;live&lt;/desc&gt; &lt;length units="seconds"&gt;600.0&lt;/length&gt; &lt;icon src="https://img.brightcove.com/cloudplayout/live- icon.jpg“width = "" height = ""/&gt; &lt;Kategorie&gt; Live &lt;/ category&gt; &lt;keyword&gt; eyJ2aWRlb19pZCI6IjcwNzAxMjE2NDgyMjAyIiwib3JkZXIiOjMsInRhZ3MiOiJyb21hbmNlIiwiY3VzdG9tX21ldGFkYXRhIjp7InJlZ2lvbiI6ImFzaWEiLCJzb25ncyI6NX19 &lt;/ keyword&gt; &lt;/ program&gt; &lt;/ tv&gt;</code></pre>
		<p>Das hervorgehobene <code translate="no">halt</code> Wert im letzten Datensatz ist ein Zeitstempel in der Form <code translate="no">JJJJMMTThhmmss</code> , also im ISO 8601-Format: <code translate="No">2021-02-28 00:14:57</code>.</p>
		<p>Addieren wir eine Sekunde zu diesem Wert, erhalten wir <code translate="No">2021-02-28 00:14:58</code>.</p>
		<p>Der Abfrageparameter für die nächste Anfrage lautet dann: <code translate="no">start=2021-02-28%2000%3A14%3A57 - denken Sie daran, dass der Start (und <code translate="no">Ende</code> )-Parameter muss URI-codiert sein.</code></p>
		<p>Um alle Datensätze abzurufen, senden Sie Anfragen mit zunehmendem <code translate="no">Anfang</code> Werte, bis Sie eine HTTP-422-Antwort mit der Meldung "Kanal wird im angeforderten Zeitfenster nicht ausgeführt" erhalten.</p>
	</section>
	<section class="bcls-section">
		<h2 id="Additional_notes">Zusätzliche Hinweise zum EPG-Reaktionsverhalten</h2>
		<p>Die folgenden Hinweise zur Funktionsweise der EPG-API sollen Ihnen dabei helfen, Anfragen zu erstellen, die die gewünschte Antwort erhalten.</p>
		<ul>
			<li>Der EPG wird dynamisch basierend auf dem aktuellen Status des Kanals erstellt. Wenn sich ein Kanal in einem aktiven Status befindet, außer <code translate="No">RUNNING</code> , dann erzeugt der EPG zukünftige Daten ab der geplanten Kanalstartzeit.</li>
			<li>Wenn ein Kanal in ist <code translate="No">RUNNING</code> Zustand, wird der EPG, der ohne Abfrageparameter aufgerufen wird, eine Mischung (50% Teilung - mit einer Grenze von 100, dies würde höchstens 50 vergangene Datensätze und 50 zukünftige Datensätze) von vergangenen und zukünftigen Zeitplandaten bereitstellen.</li>
			<li>Wenn Sie einen Kanal stoppen oder löschen, befindet er sich in einem <code translate="No">INACTIVE</code> Zustand; die zukünftigen EPG-Aufzeichnungen sind nicht verfügbar, da der Kanal seinen Lauf beendet hat.
				<ul>
					<li>In solchen Fällen gibt der EPG entweder einen leeren Datensatz oder einen Fehlercode 422 zurück.</li>
					<li>Falls historische Daten für einen der inaktiven Zustände benötigt werden, muss die EPG-Anfrage eine vergangene Start-/Endzeit in den Abfrageparametern haben.</li>
				</ul>
			</li>
			<li>Wenn die EPG-Anfrage sowohl ein <code translate="No">end</code> Zeit und <code translate="No">limit</code> , <code translate="No">limit</code> bevorzugt wird und dass viele Datensätze generiert werden - in diesem Fall erhalten Sie möglicherweise Datensätze hinter der angegebenen Endzeit.</li>
			<li>Die <code translate="No">start</code>/<code translate="No">end</code> Fenster darf 14 Tage nicht überschreiten. <code translate="No">start</code> kann 14 Tage vor dem aktuellen Datum/Uhrzeit liegen, um einen historischen EPG abzurufen. Sie können auch zukünftige EPG-Daten bis zu 14 Tage nach dem aktuellen Datum und Uhrzeit abfragen.</li>
			<li>Wenn die Differenz zwischen der angegebenen Endzeit und der Startzeit mehr als 14 Tage beträgt, generiert die API Plandaten für nur 14 Tage vom Zeitpunkt der Anfrage bis zum geplanten Stopp des Kanals oder 14 Tage, je nachdem, was früher eintritt.</li>
			<li>Beide <code translate="No">start</code> und <code translate="No">end</code> kann Datum-Uhrzeit-Werte mit oder ohne Zeitzonen-Offset akzeptieren - wenn kein Zeitzonen-Offset enthalten ist, wird UTC angenommen</li>
			<li>Beide <code translate="No">start</code> und <code translate="No">end</code> Werte müssen URI-codiert sein.</li>
		</ul>
		<h3>Gründe, warum die EPG-API einen 422-Fehlercode zurückgibt</h3>
		<ul>
			<li>Die EPG-Startzeit kann nicht länger als 14 Tage ab dem Kanalstart oder der aktuellen Zeit sein, je nachdem, welcher Wert größer ist</li>
			<li>Die EPG-Startzeit darf nicht älter als 14 Tage vor der aktuellen Zeit sein</li>
			<li>Das EPG-Intervall muss kleiner oder gleich 14 Tage sein (Startzeit und Endzeit sollten innerhalb von 14 Tagen liegen)</li>
			<li>Der Kanal befindet sich im angeforderten Zeitfenster im laufenden Status (EPG mit Startzeit nach der geplanten Stoppzeit des Kanals angefordert) Die Startzeit muss angegeben werden oder sollte kleiner als die Endzeit sein (Startzeit &lt; Endzeit)</li>
		</ul>
	</section>
</article>