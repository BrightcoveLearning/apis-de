---
title: 'Authentifizierung für API-Anfragen'
description: 'In diesem Thema wird die Authentifizierung für Anforderungen an die Brightcove-REST-APIs behandelt.'
parent: General 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>

    <p>Die meisten Brightcove-REST-APIs verwenden OAuth2 als Grundlage für die Authentifizierung, und wir werden uns die OAuth-Implementierung in den folgenden Abschnitten genauer ansehen.</p>

    <p>Beachten Sie jedoch zunächst, dass zwei APIs unterschiedliche Ansätze zur Authentifizierung verwenden:</p>

    <section class="bcls-subsection">
      <h3 id="policy_key">Richtlinienschlüssel-Authentifizierung: Wiedergabe-API</h3>

      <p>Die <a href="/playback/index.html">Wiedergabe-API</a> wird hauptsächlich verwendet, um Video- und Playlist-Daten von Playern oder Webportalen abzurufen, verwendet a <code translate="No">policy_key</code> , zur Authentifizierung, wird normalerweise als Argument in an . übergeben <code translate="No">Accept</code> Header:</p>

      <pre>
        <code class="language-http" translate="No">Accept: application/json;pk={policy_key}</code></pre>

      <p>Richtlinienschlüssel werden für Brightcove-Player automatisch generiert und können von a <a href="/policy/getting-started/policy-keys.html#Getting_the_policy_key">Spielerkonfiguration</a> , oder generiert mit dem <a href="/policy/index.html">Richtlinien-API</a></p>
    </section>

    <section class="bcls-subsection">
      <h3 id="authentication_api_key">API-Schlüssel-Authentifizierung: Live-API</h3>

      <p>Die <a href="https://live.support.brightcove.com/live-api/">Live-API</a> verwendet einen API-Schlüssel, der bei der Einrichtung Ihres Kontos bereitgestellt wird, um Anfragen zu authentifizieren. Der API-Schlüssel wird in einem <code translate="No">X-API-KEY</code> Header:</p>

      <pre>
        <code class="language-http" translate="No">X-API-KEY : {YOUR_APIKey}</code></pre>
    </section>
  </section>

  <section class="bcls-section">
    <h2 id="oauth2_authentication">OAuth2-Authentifizierung</h2>

    <p>Die anderen REST-APIs für Video Cloud verwenden OAuth2 zur Authentifizierung. Für diejenigen, die mit OAuth2 vertraut sind, verwenden wir einen Client-Anmeldedatenfluss. Es sind zwei Operationen beteiligt:</p>

    <ol>
      <li><strong>Kundenanmeldeinformationen abrufen:</strong> Dies ist ein einmaliger Vorgang, der am einfachsten mit dem <strong>API-Authentifizierung</strong> Seite der Admin-Tools in Studio. Sehen <a href="/general/managing-api-authentication-credentials.html">Anmeldeinformationen für die API-Authentifizierung verwalten</a> für Details und Schritt-für-Schritt-Anleitungen.</li>
      <li><strong>Abrufen eines Zugriffstokens:</strong> Jede API-Anfrage muss ein Zugriffstoken enthalten, das in einem gesendet wird <code translate="No">Authorization</code> Header:
        <pre>
        <code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>

        <p>Zugriffstokens leben fünf Minuten lang. Wenn Sie also keinen Prozess ausführen, der wiederholte API-Anfragen generiert, möchten Sie wahrscheinlich nur einen neuen für jede Anfrage erhalten.</p>

        <p>Zugriffstoken werden abgerufen, indem die Client-Anmeldeinformationen in einer Anfrage an die OAuth-API von Brightcove gesendet werden. Sehen <a href="/oauth/guides/getting-access-tokens.html">Zugriffstoken erhalten</a> für alle Einzelheiten. Da ist auch ein <a href="/oauth/code-samples/oauth-api-sample-get-access-token.html">Beispiel-App</a> Sie können ein einmaliges Token zum Testen von API-Aufrufen verwenden. Es gibt auch Anweisungen zur Konfiguration der beliebten REST-Clients <a href="/general/use-postman-api-requests.html">Postbote</a> und <a href="/general/use-insomnia-api-requests.html">Schlaflosigkeit</a>.</p>
      </li>
    </ol>
  </section>
  <section class="bcls-section" id="stepsGetCredentials">
    <h2>Client-Anmeldeinformationen über die OAuth-API</h2>

    <p>Wenn Sie Client-Anmeldeinformationen mit der OAuth-API erstellen möchten oder müssen, finden Sie unten die Schritte, die Sie durch das Abrufen Ihrer Client-Anmeldeinformationen führen. Sie müssen zuerst Ihren BC_TOKEN abrufen, der verwendet wird, um Sie für die Anforderung der Client-Anmeldeinformationen zu authentifizieren.</p>

    <h3>Bekomm dein <code translate="No">BC_TOKEN</code> und Kontonummer</h3>

    <p>Sie müssen sich bei Studio anmelden, um Ihre <code translate="No">BC_TOKEN</code>.</p>

    <ol class="bcls-tasklist">
      <li>Melden Sie sich wie gewohnt bei Studio an.</li>
      <li>Sie benötigen Ihre Kontonummer (in Studio als Publisher-ID bezeichnet), die Sie über Ihre Kontoinformationen in Studio erhalten:
        <figure class="bcls-figure"><img class="bcls-image" alt="Account ID" src="/assets/images/getting-started/account-info-studio.png" />
          <figcaption class="bcls-caption--image">Konto-ID</figcaption>
        </figure>
      </li>
      <li>Öffnen Sie bei geöffneter Seite in Studio die Entwicklertools für den Browser, wechseln Sie zur Konsole und fügen Sie den folgenden Code ein:
        <pre class="line-numbers">
      <code class="language-javascript" translate="No">var cookiesArray = document.cookie.split(";"), cookiesObj = {}, i, tmpArray = [];
      for (i = 0; i &lt; cookiesArray.length; i++) {
          tmpArray = cookiesArray[i].split("=");
          if (tmpArray[0].indexOf('BC_TOKEN') &gt; -1) {
              cookiesObj.BC_TOKEN = tmpArray[1];
          }
      }
      window.prompt("BC_TOKEN:", cookiesObj.BC_TOKEN);</code></pre>

        <p>...und drücken Sie die Eingabetaste.</p>
      </li>
      <li>Sie sollten eine Eingabeaufforderung sehen, die Ihre . enthält <code translate="No">BC_TOKEN</code>:
        <figure class="bcls-figure"><img class="bcls-image" alt="BC_TOKEN" src="/assets/images/getting-started/prompt-with-token-safari.png" />
          <figcaption class="bcls-caption--image">BC_TOKEN</figcaption>
        </figure>
      </li>
      <li>Wenn Sie Ihr BC_TOKEN haben, gehen Sie zum <a href="#getCredentials">Kundenanmeldeinformationen abrufen</a> Sektion; Wenn Sie Ihr BC_TOKEN aus irgendeinem Grund nicht mit den vorherigen Schritten erhalten haben, gehen Sie einfach zur Konsole, geben Sie ein <code translate="No">document.cookies</code> , und drücken Sie die Eingabetaste.</li>
      <li>Alle Cookies für die Seite werden in einer durch Semikolons getrennten Liste zurückgegeben. Suchen Sie das BC_TOKEN-Cookie in der Liste und kopieren Sie den Wert:
        <figure class="bcls-figure"><img class="bcls-image" alt="Get BC_TOKEN from Console" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/ingest-profiles-api/guides/get-access-token-console.png" />
          <figcaption class="bcls-caption--image">BC_TOKEN von der Konsole abrufen</figcaption>
        </figure>
      </li>
    </ol>

    <h3 id="getCredentials">Werden <code translate="No">client_credentials</code></h3>

    <p>Jetzt können wir den OAuth-Dienst aufrufen, um Client-Anmeldeinformationen abzurufen. Wir müssen einen Client-Anwendungsnamen angeben, für den wir Anmeldeinformationen anfordern - der Name ist willkürlich, soll Ihnen helfen, den Zweck der Anmeldeinformationen zu verfolgen - und hier verwenden wir einfach "ingest-profiles-api-client". Wir müssen auch den Umfang der Operationen angeben, auf die wir in einem Array zugreifen möchten, und hier werden wir verwenden. Die verfügbaren Operationen sind in <a href="/oauth/guides/api-operations-client-credentials-requests.html">API-Operationen für Client-Anmeldeinformationen-Anforderungen</a>. In den folgenden Schritten geben Sie die Operationen an, die für die Ingest Profiles API erforderlich sind.</p>

    <ol class="bcls-tasklist">
      <li>Bearbeiten Sie den folgenden curl-Befehl, fügen Sie ihn in die Befehlszeile ein und drücken Sie <strong>Zurückkehren</strong>. Sie müssen Ihre spezifischen Werte für die folgenden drei Werte angeben:

        <ul>
          <li><em><strong>dein BC_TOKEN</strong></em></li>
          <li><em><strong>Ihr Anmeldename</strong></em></li>
          <li><em><strong>Ihre Konto-ID</strong></em></li>
        </ul>

        <pre class="line-numbers">
      <code class="language-bash" translate="No">curl \
        --include \
        --header "Authorization: BC_TOKEN <em><strong>your_BC_TOKEN</strong></em>" \
        --data 'name=ingest-profiles-api-client&amp;maximum_scope=[{
            "identity": {
              "type": "video-cloud-account",
              "account-id": <em><strong>your_account_id</strong></em>
            },
            "operations": [
                  "video-cloud/ingest-profiles/profile/read",
                  "video-cloud/ingest-profiles/profile/write",
                  "video-cloud/ingest-profiles/account/read",
                  "video-cloud/ingest-profiles/account/write"
              ]
          }]' \
      https://oauth.brightcove.com/v4/client_credentials</code></pre>
      </li>
      <li>Die Antwort sollte wie folgt aussehen (Formatierung hinzugefügt):
        <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "redirect_url": null,
        "maximum_scope": [
          {
            "identity": {
              "type": "video-cloud-account",
              "account-id": your_video_cloud_account_id
            },
            "operations": [
              "video-cloud/ingest-profiles/profile/write",
              "video-cloud/ingest-profiles/account/write",
              "video-cloud/ingest-profiles/profile/read",
              "video-cloud/ingest-profiles/account/read"
            ]
          }
        ],
        "name_html": "ingest-profiles-api-client",
        "issued_to": "your_email@host.com",
        "trusted": null,
        "expires_at": null,
        "issued_at": "2015-06-01T15:09:00Z",
        "name": "ingest-profiles-api-client",
        "description_html": null,
        "revoked": null,
        "type": "credential",
        "client_secret": "Ifckr6cWtxOh_NZnEVhKCgcqZaqoMcPuoJ-VGuivIE_psPoPUt2hGqUK15uPON3x3m748ElazZoOKPxbI3-4nQ",
        "description": null,
        "client_id": "da270d86-f3cd-4ee6-85b0-047df97a0db2",
        "issued_user": your_video_cloud_account_id
      }</code></pre>
      </li>
      <li>Kopieren und speichern Sie die <code translate="No">client_id</code> und <code translate="No">client_secret</code> , da Sie diese jederzeit benötigen, um eine zu bekommen <code translate="No">access_token</code>.</li>
    </ol>
  </section>

  <section class="bcls-section" id="accessToken">
    <h2>Zugriffstoken über die OAuth-API</h2>

    <p>Zugriffstoken sind im Gegensatz zu Client-Anmeldeinformationen kurzlebig – derzeit laufen sie in 5 Minuten ab. Sie müssen für jede API-Anfrage eine neue anfordern. Sie können natürlich eine Logik in eine App einbauen, um das neueste Zugriffstoken zu überprüfen, um zu sehen, ob es eine Zeitüberschreitung hat, aber Anfragen an die Ingest Profiles API sind wahrscheinlich dünn gesät, daher gibt es keinen guten Grund, dies zu tun .</p>

    <p>Tatsächlich kann es sein, dass Sie die API nur selten verwenden, sodass es sich möglicherweise nicht lohnt, eine App darauf aufzubauen. Eine Alternative wäre zu verwenden <a href="/assets/downloads/api-tester.sh.zip">dieses Shell-Skript</a> die von Brightcove Learning Services erstellt wurden. Sie können Ihre Client-ID und Ihr Geheimnis, die API-Anfrage und -Methode sowie alle Anfragedaten eingeben. Es wird dann ein <code translate="No">access_token</code> , stellt die API-Anfrage und gibt die Antwort aus. (Beachten Sie, dass das Shell-Skript cURL verwendet, das nativ auf Mac MacOS und anderen Unix/Linux-Systemen installiert ist, oder <a href="https://general.support.brightcove.com/developer/concepts-set-curl.html">kann unter Windows installiert werden</a>.</p>

    <p>Um Zugriffstoken abzurufen, stellen Sie eine POST-Anfrage an:</p>

    <pre class="line-numbers">
      <code class="language-http" translate="No">https://oauth.brightcove.com/v4/access_token</code></pre>

    <p>Bei diesem Aufruf müssen Sie die folgenden Header übergeben:</p>

    <ul>
      <li><code translate="No">Content-Type: application/x-www-form-urlencoded</code></li>
      <li><code translate="No">Authorization: Basic {client_id}:{client_secret}</code></li>
    </ul>

    <p>Das ganze <code translate="No">{client_id}:{client_secret}</code> string muss Base64-codiert sein (curl wird den String automatisch Base64-codieren, wenn Sie ihn als übergeben <code translate="No">--user</code> Referenzen; in anderen Sprachen müssen Sie die Base64-Kodierung selbst übernehmen).</p>

    <p>Sie müssen außerdem das folgende Schlüssel/Wert-Paar als Anfragetext oder als URL-Parameter senden:</p>

    <pre class="line-numbers">
      <code class="language-bash" translate="No">grant_type=client_credentials</code></pre>

    <p>Die Antwort sieht wie folgt aus (hier zur besseren Lesbarkeit hübsch gedruckt):</p>

    <pre class="line-numbers">
      <code class="language-json" translate="No">{
          "access_token": <strong>"ANB7xKhiUZmwltVd3f1odcHHM9VAwg02kwmLwtZwHv3SxGCOWLUf5W4G7X22PRjmR9StvFUqzpVZ1suOfyfOigdi-rnohxyEaSSuZceeLw_9OBW7fXldOG05HEgkeK3N-DBZZZyilodmjA1JWZHbgI3IU7Rmz5IPGyi-sDxHN3KlOr1BDZlLZpXPdFPwEyb6idq-z8AL-blKTSMtNI3_fz3oNBisfrHGUv5tXHoQT4B7FYcvdrap16gTOO7_wNt1zmgLJiUHvyxZgsgBchm_AhohVL-AYgcfCbCR0v7d2hgI4ag35pnZNeujDiBLfnCFcVMlqQGq8UEVZrmU9a8y4pVAGih_EImmghqmSrkxLPYZ800-vIWX-lw"</strong>,
          "token_type": "Bearer",
          "expires_in": 300
      }</code></pre>

    <p>Die <code translate="No">access_token</code> Wert ist das, was Sie in einem weitergeben müssen <code translate="No">Authorization</code> Header mit Ihrem API-Aufruf in dieser Form:</p>

    <pre class="line-numbers">
      <code class="language-bash" translate="No">Authorization: Bearer {access_token}</code></pre>

    <p>Die <code translate="No">expired_in</code> value ist die Anzahl der Sekunden, für die das Zugriffstoken gültig ist.</p>

    <p>Weitere Informationen und Beispielcode finden Sie unter <a href="/oauth/guides/getting-access-tokens.html">Zugriffstoken erhalten</a></p>
  </section>
</article>