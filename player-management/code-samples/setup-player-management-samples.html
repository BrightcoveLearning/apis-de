---
title: 'Setup für Spielermanagement-Beispiele'
description: 'Auf dieser Seite wird beschrieben, wie die grundlegenden Beispiele für den neuen Player geschrieben werden. Dazu gehören Details zur Basisauthentifizierung und zur Verwendung von AJAX in den Player Management API-Beispielen.'
parent: Code Samples 
grandparent: Player Management API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>
    
    <p>Im Schritt-für-Schritt: Player Management-Dokument, in dem Sie curl-Anweisungen verwendet haben, um mit der API zu interagieren. Bei einem API-Aufruf wurden Sie interaktiv zur Eingabe eines Kennworts aufgefordert. Während dies für curl gut funktioniert, ist diese Art der interaktiven Authentifizierung beim Erstellen einer Anwendung nicht möglich.</p>
    
    <p>Hier erfahren Sie, wie Sie die API-Anfragen mit JavaScript und XMLHttpRequest – auch bekannt als AJAX – stellen, um Webclients für Spielerverwaltungsvorgänge zu erstellen</p>
    
    <p>Weil die Spielerverwaltungs-API <a href="https://general.support.brightcove.com/developer/concepts-cors.html">CORS-fähig</a> und ermöglicht die grundlegende Authentifizierung mit Ihren Brightcove-Anmeldedaten. Es ist möglich, API-Anforderungen direkt von einer Webseite aus zu stellen, wie wir es in Player Management API-Beispielen tun. Die anderen RESTful-APIs von Brightcove erfordern eine Authentifizierung über <a href="/oauth/index.html">OAuth</a>. Da die zum Abrufen von Zugriffstoken verwendete API nicht CORS-fähig ist (und die APIs selbst auch nicht), müssen Sie Anfragen über eine serverseitige App stellen. Sehen <a href="/getting-started/learning-guide-using-rest-apis.html">Verwenden der REST-APIs</a> für eine Anleitung zum Erstellen von Hybrid-Apps mit einer Web-Benutzeroberfläche und einem Proxy für den Zugriff auf die REST-APIs. Dies ist der Ansatz, den wir auch für Apps empfehlen, die die Player Management API in der Produktion verwenden, da er sicherer ist und keine Anmeldeinformationen über HTTP-Verbindungen senden.</p>
    
    <aside class="bcls-aside bcls-aside--warning">
    <p>Die auf dieser Seite genannten Beispiel-Apps sollen Ihnen die Grundlagen der Player Management API näher bringen. Sie sind nicht als unternehmensfähige, bereitstellbare Apps gedacht. Beispielsweise ist die Formularvalidierung nicht erschöpfend und Passwörter werden NICHT über HTTPS gesendet.</p>
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Basic_authentication">Basisauthentifizierung</h2>
    
    <p>Im Schritt-für-Schritt: Player Management-Dokument, in dem Sie curl-Anweisungen verwendet haben, um mit der API zu interagieren. Bei einem API-Aufruf wurden Sie interaktiv zur Eingabe eines Kennworts aufgefordert. Während dies für curl gut funktioniert, ist diese Art der interaktiven Authentifizierung beim Erstellen einer Anwendung nicht möglich.</p>
    
    <p>Sie können beim Erstellen einer App die Standardauthentifizierung verwenden. In der Kopfzeile müssen Sie die Zugangsdaten, verschlüsselt in einer Base-64-codierten ASCII-Zeichenfolge, senden. Sie können das JavaScript verwenden <code translate="No">btoa()</code> Methode für die Codierung. Angenommen <code translate="No">account_username</code> und <code translate="No">account_password</code> B. aus einem Formular aufgefüllt werden, würde die Kopfzeile Autorisierung wie folgt aussehen:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No"> "Authorization": "Basic " + btoa(account_username + ":" + account_password),</code></pre>
    </section>
    
    <section id="ajax" class="bcls-section">
    <h2>AJAX</h2>
    
    <aside class="bcls-aside bcls-aside--information">
    <p>In diesem Abschnitt erfahren Sie, wie Sie AJAX mithilfe von <a href="//jquery.org">jQuery</a> . jQuery kapselt die Befehle, die beim Erstellen von AJAX-Anfragen erforderlich sind, in eine ajax()-Funktion und vereinfacht so die Dinge für Sie als Entwickler. Für AJAX ist jQuery jedoch nicht erforderlich, und im folgenden Abschnitt zeigen wir Ihnen, wie Sie AJAX-Anfragen mit reinem JavaScript stellen.</p>
    </aside>
    
    <p>Anstatt curl-Anweisungen zu verwenden, verwenden diese Beispiele JavaScript, um mit der API zu kommunizieren. Dies bedeutet, dass AJAX verwendet wird, um die Anfrage an die API auszugeben. Eine konkrete Beispielanfrage könnte etwa so aussehen:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">$.ajax({
        type: "DELETE",
        headers: {
        "Authorization": "Basic " + btoa("username:password"),
        "Content-Type": "application/json"
        },
        url: "https://players.api.brightcove.com/v2/accounts/123456789/players/478772a5-a2f2-44c6-a26b-2d7234bd97f5",
        success: ajaxSuccess,
        error: ajaxError
    });</code></pre>
    
    <p>Damit verbundenen <code translate="No">success</code> und <code translate="No">error</code> Handler könnten so aussehen:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">var ajaxSuccess = function (data) {
        document.getElementById("jsonResponse").innerHTML = JSON.stringify(data,null,2);
        };
    
        var ajaxError = function (data) {
        console.log("error data: ");
        console.log(data);
    };</code></pre>
    
    <p>Natürlich möchten Sie nicht alle Informationen im AJAX-Aufruf wie oben gezeigt hartcodieren, daher ist es sinnvoll, den eigentlichen Aufruf zu einer wiederverwendbaren Funktion zu abstrahieren, wie hier gezeigt:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">var makeAjaxCall = function (callURL, callType, callData) {
        if (callData) {
            $.ajax({
                type: callType,
                headers: {
                    "Authorization": "Basic " + btoa(account_username + ":" + account_password),
                    "Content-Type": "application/json"
                },
                url: callURL,
                data: JSON.stringify(callData),
                success: ajaxSuccess,
                error: ajaxError
            });
        } else {
            $.ajax({
            type: callType,
            headers: {
                "Authorization": "Basic " + btoa(account_username + ":" + account_password),
                "Content-Type": "application/json"
            },
            url: callURL,
            success: ajaxSuccess,
            error: ajaxError
            });
        }
    };</code></pre>
    <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="22-47"></code><br /> -->
    
    <aside class="bcls-aside bcls-aside--information">Separate Aufrufe werden erstellt, wenn Daten mit dem API-Aufruf übergeben werden müssen. Im Schritt-für-Schritt: Player Management Dokument haben Sie beide Anwendungsfälle gesehen. Das Veröffentlichen eines Players erfordert keine Weitergabe von Daten, während das Erstellen eines Players mit einer Medienquelle die Weitergabe von Daten erfordert.</aside>
    
    <p>Anschließend können Sie die Funktion aufrufen. Im folgenden Beispiel ist die <code translate="No">account_id</code> , <code translate="No">account_password</code> und <code translate="No">account_username</code> Werte werden alle aus einem Formular extrahiert.</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">var getPlayerInfo = function () {
        account_id = document.getElementById("account_id").value,
        account_password = document.getElementById("account_password").value,
        account_username = document.getElementById("account_username").value;
        call_url = "https://players.api.brightcove.com/v2/accounts/" + account_id + "/players";
        makeAjaxCall(call_url, "GET", null);
    };</code></pre>
    <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="49-55"></code><br /> -->
    
    <p>Wenn Sie den Schritt für Schritt abgeschlossen haben: Player Management-Dokument wissen Sie, dass einige Prozesse mehrere API-Aufrufe benötigen, z. B. das Erstellen und Veröffentlichen eines Players. Außerdem erfordert die Logik einiger Apps möglicherweise mehrere API-Aufrufe, z. In diesen Fällen müssen Sie höchstwahrscheinlich Ihre <code translate="No">success</code> -Handler, um eine andere Logik auszuführen, je nachdem, welcher Aufruf gerade erfolgreich ausgeführt wurde. In diesen Beispiel-Apps wird die Implementierungslogik für diese Anwendungsfälle mithilfe einer Flag-Variablen implementiert. <code translate="No">callPurpose</code> , und ein <code translate="No">case</code> -Anweisung mit diesem Flag, wie hier gezeigt:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">var ajaxSuccess = function (data) {
        switch (callPurpose) {
            case "getPlayers":
                createCheckboxes(data);
                watchCheckboxes();
                break;
            case "deletePlayer":
                document.getElementById("jsonResponse").textContent += data;
                break;
        }
    };</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="AJAX_without_jquery">AJAX ohne jQuery</h2>
    
    <p>Wenn Sie jQuery lieber nicht verwenden möchten, ist das Erstellen von AJAX-Anfragen etwas komplexer, aber nicht zu viel. Hier ist ein Beispielcode mit Kommentaren, um Ihnen den Einstieg zu erleichtern:</p>
    
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">/**
     * createRequest sets up requests, send them to makeRequest(), and handles responses
     * @param  {string} type the request type
     */
    function createRequest(type) {
        var options   = {},
            baseURL = 'https://players.api.brightcove.com/v2/accounts/',
            account_id = '1234567890',
            // would be better to get these from form fields
            // and not hardcode them
            username = 'jane@myplace.com',
            password = 'mypassword',
            responseDecoded;
    
        // set credentials
        options.client_id     = cid.value;
        options.client_secret = secret.value;
    
        switch (type) {
            case 'getPlayers':
                options.url         = ipBaseURL + account_id + '/players';
                options.requestType = 'GET';
                options.username = username;
                options.password = password;
                makeRequest(options, function(response) {
                    // use try catch in case something went wrong
                    try {
                        responseDecoded = JSON.parse(response);
                        // now do whatever you want with the response
                    }
                    catch (e) {
                        console.log('something went wrong - this was the JSON.parse error: ' + e);
                    }
                });
                break;
            // additional cases
            default:
                console.log('Should not be getting to the default case - bad request type sent');
                break;
        }
    }
    
    /**
     * send API request
     * @param  {Object} options for the request
     * @param  {String} options.url the full API request URL
     * @param  {String="GET","POST","PATCH","PUT","DELETE"} requestData [options.requestType="GET"] HTTP type for the request
     * @param  {String} options.username username for the account
     * @param  {String} options.password password for the account
     * @param  {JSON} [options.requestBody] Data (if any) to be sent in the request body in the form of a JSON string
     * @param  {Function} [callback] callback function that will process the response
     */
    function makeRequest(options, callback) {
        var httpRequest = new XMLHttpRequest(),
            response,
            requestParams,
            dataString,
            // response handler
            getResponse = function() {
                try {
                    if (httpRequest.readyState === 4) {
                        // don't just check for status = 200
                        // some requests return other 2xx codes
                        if (httpRequest.status &gt;= 200 &amp;&amp; httpRequest.status &lt; 300) {
                            response = httpRequest.responseText;
                            // return the response to the callback
                            callback(response);
                        } else {
                            alert('There was a problem with the request. Request returned ' + httpRequest.status);
                        }
                    }
                } catch (e) {
                    alert('Caught Exception: ' + e);
                }
            };
        /**
         * set up request data
         */
        // set response handler
        httpRequest.onreadystatechange = getResponse;
        // open the request
        httpRequest.open(options.requestType, options.url);
        // set headers
        httpRequest.setRequestHeader("Content-Type", "application/json");
        httpRequest.setRequestHeader("Authorization", "Basic " + btoa(options.username + ":" + options.password));
        // open and send request
        if (options.requestBody) {
            httpRequest.send(options.requestBody)
        } else {
            httpRequest.send();
        }
    }</code></pre>
    </section>
    </article>
 