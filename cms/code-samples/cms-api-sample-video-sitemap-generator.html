---
title: 'Video-Sitemap-Generator'
description: 'Dieses Beispiel zeigt, wie Sie mit der CMS-API eine Video-Sitemap generieren können.'
parent: 'Code Samples' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>

    <aside class="bcls-aside bcls-aside--information">Dieses Beispiel und der zugehörige Code dienen als Leitfaden für Ihre Produktionsentwicklung. Der Code ist weder für den Produktionsgebrauch zertifiziert noch offiziell unterstützt.</aside>

    <p>Bevor Sie diese App verwenden, sollten Sie lesen <a href="https://studio.support.brightcove.com/general/making-your-video-content-indexable.html">Machen Sie Ihren Videoinhalt indexierbar</a> um den Zweck von Video-Sitemaps und Strategien zur Automatisierung ihrer Generierung mithilfe der CMS-API besser zu verstehen. Das Generieren der XML für die Sitemap ist ziemlich einfach. Die größte Herausforderung besteht darin, dass Sie für jedes Video eine eindeutige URL angeben müssen <span translate="No">CMS-API</span> hat keinen automatischen Zugriff auf diese Informationen. Um dies zu überwinden, gibt es ein paar Dinge, die Sie tun können:</p>

    <ol>
      <li>Fügen Sie den Videometadaten die URL hinzu, unter der das Video veröffentlicht wird. Der einfachste Weg, dies zu tun, besteht darin, a . zu erstellen <a href="https://studio.support.brightcove.com/admin/creating-custom-metadata-fields.html">benutzerdefiniertes Metadatenfeld</a> um die URL zu speichern.</li>
      <li>Hosten Sie die Videos auf einer einzigen Seite, indem Sie einen URL-Parameter verwenden, um das Video anzugeben <code translate="No">id</code> oder <code translate="No">reference_id</code> das benutzerdefinierte JavaScript auf der Seite verwendet, um das Video in den Player zu laden.
        <p>Es gibt verschiedene Möglichkeiten, den Wert eines bestimmten URL-Parameters für die Seite abzurufen. Nachfolgend finden Sie eine Funktion, die wir in einigen unserer Beispiel-Apps verwenden:</p>

        <pre class="line-numbers">
            <code class="language-javascript" translate="No">/**
             * gets value of a URL param on current page URL if exists
             * @param {string} name the param you want the value of
             * @return {string} result value of param if exists or null
             */
            function getURLparam(name) {
                var regex,
                    results;
                name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                regex = new RegExp("[\\?&amp;]" + name + "=([^&amp;#]*)");
                results = regex.exec(location.search);
                return results === null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
            }</code></pre>

        <p>Sobald Sie die <code translate="No">id</code> oder <code translate="No">reference_id</code> , müssen Sie es dem Player hinzufügen. Wie Sie das tun, hängt davon ab, ob Sie den Standard verwenden (<code translate="No">iframe</code> ) oder erweiterten (In-Page) Player-Einbettungscode. Am einfachsten und sichersten ist es wahrscheinlich&nbsp;zu <a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-loading-player-dynamically.html">den Player dynamisch laden</a> (oder nicht, wenn aus irgendeinem Grund der URL-Parameter mit der ID nicht vorhanden ist).</p>

        <p>Ein Beispiel für eine einzelne HTML-Seite, die für diesen Zweck verwendet werden kann, ist document in the <a href="#Single_page">Einzelne Seite</a> Abschnitt unten.</p>
      </li>
    </ol>

    <p>Mit der folgenden Beispiel-App können Sie beide Methoden verwenden – Sie müssen sie nur angeben, indem Sie Informationen in die entsprechenden Felder eingeben.</p>

    <h3>Hinweise zur Beispiel-App:</h3>

    <ol>
      <li>Die App stellt eine Anfrage an die <span translate="No">Analytics-API</span> Wenn die von Ihnen angegebenen Client-Anmeldeinformationen keine Berechtigungen für die Analytics-API enthalten, schlägt die App fehl.</li>
      <li>Die maximale Anzahl von Videos, die aufgenommen werden können, beträgt 50.000 und es gibt auch eine Begrenzung der Dateigröße von 50 MB, die Sie mit weniger als 50.000 Videos erreichen können. Wenn Sie mehr Videos einfügen möchten, müssen Sie diese in mehrere Sitemaps aufteilen und eine Sitemap-Indexdatei hinzufügen. Sehen <a href="https://support.google.com/webmasters/answer/80471">Sitemap-Dokumentation von Google</a> für mehr Informationen.</li>
      <li>Die von der Beispiel-App generierte Sitemap enthält einige der optionalen Tags für Videos nicht (Informationen dazu finden Sie im oben genannten Google-Dokument). Wenn Sie diese einbinden möchten, können Sie den Code aus dieser App nehmen und eine modifizierte Version erstellen. Es gibt Kommentare im JavaScript- und HTML-Code, um anzugeben, was Sie tun müssen.
        <table class="bcls-table">
          <caption class="bcls-caption--table">Optionale Tags enthalten oder nicht</caption>
          <thead class="bcls-table__head">
            <tr>
              <th>Tags enthalten</th>
              <th>Tags nicht enthalten</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td>
                <ul>
                  <li>player_loc</li>
                  <li>Dauer</li>
                  <li>Ablaufdatum (falls zutreffend)</li>
                  <li>view_count</li>
                  <li>Veröffentlichungsdatum</li>
                  <li>familienfreundlich</li>
                  <li>(Geo-)Einschränkung (falls zutreffend)</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>content_loc</li>
                  <li>Bewertung</li>
                  <li>Plattform</li>
                  <li>Preis</li>
                  <li>erfordert_Abonnement</li>
                  <li>Uploader</li>
                  <li>Live</li>
                  <li>Schild</li>
                  <li>Kategorie</li>
                  <li>gallery_loc</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>Videos werden übersprungen, wenn sie die folgenden Bedingungen nicht erfüllen:
        <ul>
          <li>Wenn Sie die URL der Videoseite in einem benutzerdefinierten Feld speichern, jedes Video, das keinen Wert für dieses benutzerdefinierte Feld hat</li>
          <li>Wenn Sie eine einzelne Seite zum Hosten Ihrer Videos verwenden und die <code translate="No">reference_id</code> um sie aufzunehmen, und das Video fehlt a <code translate="No">reference_id</code></li>
          <li>Das Video hat kein Miniaturbild</li>
          <li>Das Video hat keine MP4-Wiedergabe</li>
          <li>Das Video ist inaktiv</li>
          <li>Das Video soll zu einem späteren Zeitpunkt starten</li>
          <li>Das Video sollte vor dem aktuellen Datum enden</li>
        </ul>

        <p>Beachten Sie, dass ich für jedes übersprungene Video eine Nachricht in der Browser-Konsole mit dem Grund und der Video-ID protokolliere.</p>
      </li>
    </ol>

    <p>Schließlich, wenn Sie Ihre Sitemap nach der Generierung validieren möchten, gibt es dafür mehrere kostenlose Tools im Web - zum Beispiel:</p>

    <p><a href="https://www.inspyder.com/free/SitemapValidator.aspx">Kostenloser Sitemap-Validator</a></p>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="getCredentials">Zugangsdaten abrufen</h2>
      </summary>

      <p>Um die zu verwenden <span translate="No">CMS-API</span> Sie benötigen die richtigen Anmeldeinformationen.</p>

      <p>Die Anmeldeinformationen erhalten Sie in den meisten Fällen am einfachsten über den Abschnitt Authentifizierung der Studio-Admin-API (erfordert Administratorberechtigungen für Ihr Konto). Sehen <a href="/general/managing-api-authentication-credentials.html">Anmeldeinformationen für die API-Authentifizierung verwalten</a> für Details. In den meisten Fällen möchten Sie wahrscheinlich nur Berechtigungen für alle erhalten <span translate="No">CMS-API</span> Betrieb:</p>

      <figure class="bcls-figure"><img class="bcls-image" alt="CMS API Permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/cms-permissions.png" />
        <figcaption class="bcls-caption--image">CMS-API-Berechtigungen</figcaption>
      </figure>

      <p>Wenn die von Ihnen benötigten Berechtigungen in Studio nicht verfügbar sind oder Sie sie lieber direkt von der OAuth-API beziehen möchten, verwenden Sie Ihre Wahl der <strong>Kundenanmeldeinformationen abrufen</strong> unten aufgeführten Dokumente. Für welche Option Sie sich auch entscheiden, Sie müssen nach den richtigen Betriebsberechtigungen fragen. Folgendes kann mit cURL, Postman oder unserer Online-App verwendet werden, um alle Berechtigungen für die CMS-API zu erhalten:</p>

      <pre class="line-numbers">
              <code class="language-json" translate="No">"operations": [
                "video-cloud/video/all",
                "video-cloud/playlist/all",
                "video-cloud/sharing-relationships/all",
                "video-cloud/notifications/all"
                "video-cloud/analytics/read"
              ]</code></pre>

      <ul>
        <li>OAuth:<a href="/oauth/guides/oauth-create-client-credentials-using-curl.html"> Client-Anmeldeinformationen mit cURL abrufen</a></li>
        <li>OAuth:<a href="/oauth/guides/oauth-create-client-credentials-using-postman.html"> Erhalten Sie Kundenanmeldeinformationen mit Postman</a></li>
        <li><a href="/oauth/code-samples/oauth-api-sample-create-client-credentials.html">OAuth-API-Beispiel: Kundenanmeldeinformationen erstellen</a></li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="sampleApp">Beispiel-App</h2>
    <h3>Quellcode</h3>
    <p>Hier finden Sie den gesamten Code, der mit diesem Beispiel verknüpft ist <a href="https://github.com/BrightcoveLearning/18739-cms-api-sample-video-sitemap-generator">GitHub-Repository</a>.</p>
    <h3>Beispiel-App</h3>
    <p class="codepen" data-height="1200" data-theme-id="34967" data-default-tab="result" data-user="rcrooks1969" data-slug-hash="VRLNJp" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="CMS API Sample: Video Sitemap Generator"><span>Siehe den Stift <a href="https://codepen.io/team/rcrooks1969/pen/VRLNJp/"> <span translate="No">CMS-API</span> Stichprobe: Video-Sitemap-Generator</a> von Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcroooks1969</a> ) An <a href="https://codepen.io">CodePen</a>.</span></p>
    <script async="async" src="https://static.codepen.io/assets/embed/ei.js"></script>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="Using_the_CodePen">Verwenden des CodePens</h2>
      </summary>

      <p>Hier sind einige Tipps, um den obigen CodePen effektiv zu verwenden:</p>

      <ul>
        <li>Schalten Sie die aktuelle Anzeige des Players um, indem Sie auf klicken <strong>Ergebnis</strong> Taste.</li>
        <li>Drücke den <strong>HTML/CSS/JS</strong> Tasten, um EINEN der Codetypen anzuzeigen.</li>
        <li>Klicken <strong>Auf CodePen bearbeiten</strong> in der oberen rechten Ecke, um diesen CodePen Ihrem eigenen Konto zuzuordnen.</li>
        <li>Hier finden Sie den gesamten Code, der mit diesem Beispiel verknüpft ist <a href="https://github.com/BrightcoveLearning/18739-cms-api-sample-video-sitemap-generator">GitHub-Repository</a>.</li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="Single_page">Einzelne Seite</h2>

    <p>Wie oben erwähnt, können Sie eine HTML-Seite erstellen, die für den Speicherort jedes Videos verwendet werden kann. Die App ändert die URL für die Seite mithilfe eines Abfrageparameters, der die Video-ID definiert, die die Seite verwenden soll. Die App generiert beispielsweise JSON, das Standort-URLs ähnlich den folgenden für den Standort der Videoseiten enthält:</p>

    <pre class="line-numbers">
            <code class="language-json" translate="No">&lt;loc&gt;
                &lt;![CDATA[http://my.site.net/videos.html?videoId=5984663997001]]&gt;
            &lt;/loc&gt;
            ...
            &lt;loc&gt;
                &lt;![CDATA[http://my.site.net/videos.html?videoId=5982130568001]]&gt;
            &lt;/loc&gt;</code></pre>

    <p>Beachten Sie, dass sich nur die Video-ID ändert.</p>

    <p>Die eigentliche HTML-Seite liest die <strong>Video-ID</strong> Der URL-Parameter generiert dann dynamisch einen Player unter Verwendung der von der URL erhaltenen Video-ID. Die gesamte HTML-Seite sieht wie folgt aus:</p>

    <pre class="line-numbers">
            <code class="language-html" translate="No">&lt;!doctype html&gt;
            &lt;html&gt;
            
            &lt;head&gt;
              &lt;meta charset="UTF-8"&gt;
              &lt;title&gt;Load Player Dynamically from URL Param&lt;/title&gt;
              &lt;!-- Page styles --&gt;
              &lt;style&gt;
                .video-js {
                  width: 640px;
                  height: 360px;
                }
              &lt;/style&gt;
            &lt;/head&gt;
            
            &lt;body&gt;
              &lt;div id="placeHolder"&gt;&lt;/div&gt;
              &lt;!-- custom script --&gt;
              &lt;script type="text/JavaScript"&gt;
                var myPlayer,
                  playerHTML,
                  playerData = {},
                  theURLParam = '',
                  // Set the account ID to your account
                  myAccountId = '1507807800001';
            
                 // Read URL param for video ID
                theURLParam = geturlparam('videoId');
            
                // Assign data for the player instantiation
                playerData = {
                  'accountId': myAccountId,
                  'playerId': 'default',
                  'videoId': theURLParam
                };
            
                // Call function that builds player
                addPlayer();
            
                /**
                 * gets value of a url param on current page url if exists
                 * @param {string} name the param you want the value of
                 * @return {string} result value of param if exists or null
                 */
                function geturlparam(name) {
                  var regex,
                    results;
                  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                  regex = new RegExp("[\\?&amp;]" + name + "=([^&amp;#]*)");
                  results = regex.exec(location.search);
                  return results === null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
                };
            
                // Dynamically adds player to page
                function addPlayer() {
                  // Dynamically build the player video element
                  playerHTML = '&lt;video-js id=\"myPlayerID\" data-video-id=\"' + playerData.videoId + '\"  data-account=\"' + playerData.accountId + '\" data-player=\"' + playerData.playerId + '\" data-embed=\"default\" class=\"video-js\" controls&gt;&lt;/video-js&gt;';
                  // Inject the player code into the DOM
                  document.getElementById('placeHolder').innerHTML = playerHTML;
                  // Add and execute the player script tag
                  var s = document.createElement('script');
                  s.src = "https://players.brightcove.net/" + playerData.accountId + "/" + playerData.playerId + "_default/index.min.js";
                  document.body.appendChild(s);
                  s.onload = callback;
                }
            
                 // Initialize the player and start the video
                function callback() {
                  myPlayer = bc('myPlayerID');
                  // Can also use the following to assign a player instance to the variable if you choose not to use IDs for elements directly
                  // myPlayer = bc(document.getElementById('myPlayerID'));
                  myPlayer.on('loadedmetadata', function () {
                    // Mute the audio track, if there is one, so video will autoplay on button click
                    myPlayer.muted(true);
                    myPlayer.play();
                  })
                }
              &lt;/script&gt;
            &lt;/body&gt;
            
            &lt;/html&gt;</code></pre>

    <p>Sie müssen Ihre Kontonummer eingeben. Eine vollständige Erklärung des Codes finden Sie im <a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-loading-player-dynamically.html">Brightcove-Player-Beispiel: Den Player dynamisch laden</a> dokumentieren.</p>
  </section>

    <section class="bcls-section">
    <details>
      <summary>
        <h2 id="proxy">Proxy-Code</h2>
      </summary>

      <p>Um Ihre eigene Version der Beispiel-App auf dieser Seite zu erstellen, müssen Sie Ihren eigenen Proxy erstellen und hosten. (Die von Brightcove Learning Services verwendeten Proxys akzeptieren nur Anfragen von Brightcove-Domänen.) Ein Beispielproxy, das dem von uns verwendeten sehr ähnlich ist, jedoch ohne die Überprüfungen, die Anfragen von Nicht-Brightcove-Domains blockieren, finden Sie in <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">dieses GitHub-Repository</a>. Dort finden Sie auch grundlegende Anweisungen zur Verwendung und eine ausführlichere Anleitung zum Erstellen von Apps rund um den Proxy in <a href="/getting-started/learning-guide-using-rest-apis.html">Verwenden der REST-APIs</a>.</p>
    </details>
  </section>

</article>