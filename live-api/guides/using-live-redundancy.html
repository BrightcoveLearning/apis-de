---
title: 'Verwenden von Live-Redundanz'
description: 'Redundante Gruppen ermöglichen Ihnen die Kombination von 2 oder mehr Live-Jobs zu einem einzigen Stream mit automatischem Failover für eine unterbrechungsfreie, zuverlässige Wiedergabe. Dieser Leitfaden führt Sie durch das Erstellen einer redundanten Gruppe, das Hinzufügen von Jobs und das Erzwingen eines Failovers mithilfe der Live-API.'
parent: Guides 
grandparent: Live API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>
    
    <p>Die Redundanzfunktion von Brightcove Live trägt dazu bei, eine zuverlässige Leistung für Ihre Live-Ereignisse sicherzustellen, indem ein Backup-Stream erstellt wird, auf den Live automatisch umschaltet, falls der erste Stream nicht mehr funktioniert.</p>
    
    <p>Beachten Sie, dass alle Anfragen an die Live-API die folgenden Header erfordern:</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">API-Anforderungsheader</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Taste</th>
          <th>Wert</th>
          <th>Anmerkungen</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">X-API-KEY</code></td>
          <td>{your API Key}</td>
          <td>Ihr Schlüssel sollte bei der Eröffnung Ihres Brightcove Live-Kontos bereitgestellt worden sein</td>
        </tr>
        <tr>
          <td><code translate="No">Content-Type</code></td>
          <td>Anwendung/json</td>
          <td>Technisch gesehen ist das <code translate="No">content-type</code> Header ist nur für Schreibanforderungen erforderlich, die einen Anforderungstext enthalten, sollte jedoch bei Leseanforderungen keinen Schaden anrichten.</td>
        </tr>
      </tbody>
    </table>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_your_Live_jobs">Erstellen Sie Ihre Live-Jobs</h2>
    
    <p>Für die redundante Einrichtung müssen Sie 2 oder mehr Brightcove Live-Jobs erstellen. Die einzige Voraussetzung für die Jobs ist, dass sie mit dem . erstellt werden <strong>gleich</strong> <code translate="No">output</code> die Einstellungen. Am einfachsten erreichen Sie dies, indem Sie einen Job mit den gewünschten Ausgabespezifikationen erstellen und dann die <code translate="No">copy_outputs_from_job</code> Parameter, um die zusätzlichen Jobs zu erstellen.</p>
    
    <p>Es gibt keine Beschränkung in Bezug auf die Regionen, in denen diese Arbeitsplätze geschaffen werden können, es wird jedoch empfohlen, dass sie relativ nahe beieinander liegen.</p>
    
    <p>Nachdem die Live-Jobs erstellt wurden, bewahren Sie die Job-IDs für später auf. Der Anforderungstext, den Sie verwenden, um diese Jobs zu einer redundanten Gruppe hinzuzufügen (siehe die Abschnitte unten), sieht wie folgt aus:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[
      {
        "job_id": "0b76bc73f92f46dc917bbe5061c0c633"
      },
      {
        "job_id": "0ae5a4a71dc54b3181af0f98ee407c27"
      }
    ]</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_the_redundant_group">Erstellen Sie die redundante Gruppe</h2>
    
    <p>Um eine redundante Gruppe zu erstellen, senden Sie eine <code translate="No">POST</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups</code></pre>
    
    <p>Hier ist ein Beispiel für den Anfragetext:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "ad_insertion": true,
      "processing_regions": ["us-west-2"],
      "storage_regions": ["us-west-2", "us-east-1"],
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800
    }</code></pre>
    
    <p>Die folgende Tabelle enthält eine vollständige Liste der Felder für den Anforderungstext. In einigen Fällen sind diese mit Feldern identisch, die zum Erstellen eines Live-Jobs verwendet werden. Siehe die <a href="/live-api/references/reference.html">Live-API-Referenz</a> für weitere Details zu den Feldern.</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Redundante Gruppenfelder erstellen</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Gebiet</th>
          <th>Typ</th>
          <th>Erforderlich?</th>
          <th>Beschreibung</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">ad_insertion</code></td>
          <td>boolesch</td>
          <td>Optional</td>
          <td>Auf "true" setzen, wenn dieser Stream SSAI-aktiviert sein soll</td>
        </tr>
        <tr>
          <td><code translate="No">add_cdns</code></td>
          <td>Array</td>
          <td>Optional</td>
          <td>Array mit zusätzlichen CDN-Anbietern, die für die Manifestgenerierung verwendet werden sollen. Für jedes bereitgestellte CDN wird das Manifest entsprechend vorangestellt</td>
        </tr>
        <tr>
          <td><code translate="No">drm</code></td>
          <td>Objekt</td>
          <td>Optional</td>
          <td>Noch nicht unterstützt</td>
        </tr>
        <tr>
          <td><code translate="No">encryption</code></td>
          <td>Objekt</td>
          <td>Optional</td>
          <td>Noch nicht unterstützt</td>
        </tr>
        <tr>
          <td><code translate="No">label</code></td>
          <td>Schnur</td>
          <td>erforderlich</td>
          <td>Ein Label zur Identifizierung der Gruppe</td>
        </tr>
        <tr>
          <td><code translate="No">live_dvr_sliding_window_duration</code></td>
          <td>ganze Zahl</td>
          <td>Optional</td>
          <td></td>
        </tr>
        <tr>
          <td><code translate="No">notifications</code></td>
          <td>Array</td>
          <td>Optional</td>
          <td>Array von Benachrichtigungszielobjekten oder -zeichenfolgen</td>
        </tr>
        <tr>
          <td><code translate="No">processing_regions</code></td>
          <td>Array</td>
          <td>erforderlich</td>
          <td>Verarbeitungsregionen für die Redundante Gruppe. Dadurch wird bestimmt, welche AWS-Regionen die Manifeste generieren. Empfohlen entspricht dies storage_regions und den Regionen, in denen die Live-Jobs erstellt werden.</td>
        </tr>
        <tr>
          <td><code translate="No">storage_regions</code></td>
          <td>Array</td>
          <td>erforderlich</td>
          <td>Medienblöcke und Playlists der Speicherregionen werden in S3 hochgeladen. Empfohlen entspricht dies Processing_regions und den Regionen, in denen die Live-Jobs erstellt werden.</td>
        </tr>
        <tr>
          <td><code translate="No">videocloud</code></td>
          <td>Objekt</td>
          <td>Optional</td>
          <td>Video Cloud-Kunden haben die Möglichkeit, ein Video für den Livestream zu erstellen.</td>
        </tr>
      </tbody>
    </table>
    
    <p>Die Antwort wird ungefähr so aussehen:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "481ff4cf0bf74956bc2ec6e126588080",
      "processing_regions": [
          {
              "region": "us-west-2",
              "probability": 1
          }
      ],
      "storage_regions": [
          "us-west-2",
          "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800,
      "status": {
          "us-west-2": null
      },
      "ad_insertion": true,
      "outputs": {
          "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist_dvr.m3u8",
          "ssai_playback_urls": {
              "26f8470f61374e608e27af9c1b3f7ff0": {
                  "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_ssaiM.m3u8",
                  "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_dvr_ssaiM.m3u8",
                  "description": "House Ads - 864b84f712ae40bca1510a8052b34312",
                  "type": "ads"
              }
      }
    }</code></pre>
    </section>
    <section class="bcls-section">
      <h2 id="get_redundant_group">Holen Sie sich redundante Gruppen</h2>
      <p>Sie können alle redundanten Gruppen erhalten, indem Sie a <code translate="No">GET</code> Anfrage zu:</p>
      <pre><code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups</code></pre>
      <p>Sie können die Antwort filtern, indem Sie die <code translate="No">state</code> Param. Die zulässigen Werte sind:</p>
      <ul>
        <li><code translate="No">cancelled</code></li>
        <li><code translate="No">cancelling</code></li>
        <li><code translate="No">deleting</code></li>
        <li><code translate="No">disconnected</code></li>
        <li><code translate="No">failed</code></li>
        <li><code translate="No">finished</code></li>
        <li><code translate="No">finishing</code></li>
        <li><code translate="No">processing</code></li>
        <li><code translate="No">standby</code></li>
        <li><code translate="No">waiting</code></li>
      </ul>
      <p>Da ist auch ein <code translate="No">page_size</code> Parameter, der auf eine ganze Zahl bis 1000 gesetzt werden kann. Der Standard <code translate="No">page_size</code> ist 10.</p>
      <p>Die Antwort wird wie folgt aussehen:</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "redundant_groups": [
    {
      "id": "91c268a6ec5240d79a6004f4ccf0dc6f",
      "account_id": "a95ac581551b4478b27910e5675db1f8",
      "user_id": "c2691d4d039040be96c190a949d754a7",
      "processing_regions": [
        {
          "region": "us-west-2",
          "probability": 1
        }
      ],
      "storage_regions": [
        "us-west-2",
        "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "created_at": 1594316624287,
      "updated_at": 1594316624287,
      "label": "Test Redundant Group",
      "live_dvr_sliding_window_duration": 86400,
      "status": {
        "us-west-2": null
      },
      "outputs": {
        "playback_url": "https://bcovlive-a.akamaihd.net/r91c268a6ec5240d79a6004f4ccf0dc6f/us-west-2/NA/playlist.m3u8",
        "playback_url_dvr": "https://bcovlive-a.akamaihd.net/r91c268a6ec5240d79a6004f4ccf0dc6f/us-west-2/NA/playlist_dvr.m3u8"
      }
    },
    {
      "id": "279ac36e4b4d48a3abbd3e1f98cd57aa",
      "account_id": "a95ac581551b4478b27910e5675db1f8",
      "user_id": "c2691d4d039040be96c190a949d754a7",
      "processing_regions": [
        {
          "region": "us-west-2",
          "probability": 1
        }
      ],
      "storage_regions": [
        "us-west-2",
        "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "created_at": 1594323207015,
      "updated_at": 1594323207015,
      "label": "Test Redundant Group2",
      "live_dvr_sliding_window_duration": 86400,
      "status": {
        "us-west-2": null
      },
      "outputs": {
        "playback_url": "https://bcovlive-a.akamaihd.net/r279ac36e4b4d48a3abbd3e1f98cd57aa/us-west-2/NA/playlist.m3u8",
        "playback_url_dvr": "https://bcovlive-a.akamaihd.net/r279ac36e4b4d48a3abbd3e1f98cd57aa/us-west-2/NA/playlist_dvr.m3u8"
      }
    }
  ]
}</code></pre>
    </section>
    <section class="bcls-section">
    <h2 id="Add_live_jobs_to_the_redundant_group">Fügen Sie der redundanten Gruppe Live-Jobs hinzu</h2>
    
    <p>Nachdem Sie eine redundante Gruppe erstellt haben, können Sie ihr Jobs hinzufügen, indem Sie a <code translate="No">POST</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/jobs</code></pre>
    
    <p>Die Live-Job-IDs werden im Anfragetext wie folgt angegeben:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[
      {
        "job_id": "0b76bc73f92f46dc917bbe5061c0c633"
      },
      {
        "job_id": "0ae5a4a71dc54b3181af0f98ee407c27"
      }
    ]</code></pre>
    
    <p>Es gibt einige zusätzliche optionale Eigenschaften für die Job-Objekte – die folgende Tabelle zeigt alle Felder:</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Felder für die Anforderung von Live-Jobs hinzufügen</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Gebiet</th>
          <th>Typ</th>
          <th>Erforderlich?</th>
          <th>Beschreibung</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">job_id</code></td>
          <td>Schnur</td>
          <td>erforderlich</td>
          <td>ID des Jobs, der der Gruppe hinzugefügt werden soll. Wenn weder <code translate="No">playlist</code> oder <code translate="No">streams</code> angegeben sind, alle <code translate="No">outputs</code> verwendet werden.</td>
        </tr>
        <tr>
          <td><code translate="No">playlist</code></td>
          <td>Schnur</td>
          <td>Optional</td>
          <td>Label der Playlist, die als Ausgabe für den Stream verwendet werden soll. Wenn <code translate="No">playlist</code> ist definiert, <code translate="No">streams</code> <strong>muss</strong> Sein <em>nicht definiert</em>.</td>
        </tr>
        <tr>
          <td><code translate="No">streams</code></td>
          <td>Array</td>
          <td>Optional</td>
          <td>Liste der Stream-Labels, die als Ausgaben für den Stream verwendet werden sollen. Wenn <code translate="No">streams</code> ist definiert, <code translate="No">playlist</code> <strong>muss</strong> Sein <em>nicht definiert</em>.</td>
        </tr>
      </tbody>
    </table>
    
    <p>Die Erfolgsantwort für diese Anforderung gibt nur die redundante Gruppen-ID zurück.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Get_Redundant_Group_Status">Status der redundanten Gruppe abrufen</h2>
    
    <p>Sie können den Status einer redundanten Gruppe abrufen, indem Sie a <code translate="No">GET</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}</code></pre>
    
    <p>Die Antwort sieht wie folgt aus:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "481ff4cf0bf74956bc2ec6e126588080",
      "processing_regions": [
          {
              "region": "us-west-2",
              "probability": 1
          }
      ],
      "storage_regions": [
          "us-west-2",
          "us-east-1"
      ],
      "jobs": [
          {
              "job_id": "0b76bc73f92f46dc917bbe5061c0c633",
              "streams": [
                  "hls720p",
                  "hls540p",
                  "hls360p"
              ],
              "state": "processing"
          },
          {
              "job_id": "0ae5a4a71dc54b3181af0f98ee407c27",
              "streams": [
                  "hls720p",
                  "hls540p",
                  "hls360p"
              ],
              "state": "processing"
          }
      ],
      "state": "processing",
      "created_at": 1568057414849,
      "updated_at": 1568059153017,
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800,
      "status": {
          "us-west-2": {
              "SwitchDrift": 0,
              "Ended": false,
              "OnAir": "0b76bc73f92f46dc917bbe5061c0c633",
              "Mode": "auto",
              "InManifest": true,
              "MediaSequence": 10,
              "Healthiness": 0,
              "Duration": 4,
              "DiscontinuitySequence": 1,
              "SourceChunk": {
                  "MediaSequence": 3639,
                  "Duration": 4,
                  "DiscontinuitySequence": 0,
                  "ProgramDateTime": "2019-09-09T19:59:36Z",
                  "LiveJobID": "0b76bc73f92f46dc917bbe5061c0c633"
              },
              "UpdatedAt": "2019-09-09T19:59:46Z",
              "ProgramDateTime": "2019-09-09T19:59:36Z"
          }
      },
      "ad_insertion": true,
      "outputs": {
          "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist_dvr.m3u8",
          "ssai_playback_urls": {
              "26f8470f61374e608e27af9c1b3f7ff0": {
                  "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_ssaiM.m3u8",
                  "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_dvr_ssaiM.m3u8",
                  "description": "House Ads - 864b84f712ae40bca1510a8052b34312",
                  "type": "ads"
              }
          }
      }
    }</code></pre>
    
    <p>Jede Verarbeitungsregion in der Redundant Group hat ihre eigene <code translate="No">status</code> Objekt, codiert nach Region. Sie können in diesem Beispiel sehen, dass in der <code translate="No">us_west_2</code> Verarbeitungsregion, die <code translate="No">on_air</code> Zu tun ist <code translate="No">0b76bc73f92f46dc917bbe5061c0c633</code>.</p>
    
    <p>Als Randnotiz die <code translate="No">probability</code> der Verarbeitungsregion zugeordnet wird an dieser Stelle immer <code translate="No">1</code> , ist jedoch im Datenmodell für zukünftige Verbesserungen enthalten, die mehrere Verarbeitungsregionen mit Wahrscheinlichkeiten zwischen 0 und 1 ermöglichen, was den ungefähren Prozentsatz des Wiedergabeverkehrs darstellt, der diese Region verwendet.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="add_cuepoints">Cuepoints manuell hinzufügen</h2>
    
    <p>Das manuelle Hinzufügen von Cuepoints zu einem Livestream mit Redundanz ist dem Hinzufügen von Cuepoints zu einem normalen Livestream sehr ähnlich. Um dies für eine redundante Gruppe zu tun, machen Sie a <code translate="No">POST</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/cuepoint</code></pre>
    
    <p>Fügen Sie einen Anfragetext wie den folgenden ein:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "ad_server_data": {
        "subject": "wildlife"
      },
      "duration": 30,
      "timecode": "09:23:18:05"
    }</code></pre>
    
    <p>Wenn Sie das weglassen <code translate="No">timecode</code> Feld wird der Cuepoint sofort eingefügt.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Force_a_Job_failover">Job-Failover erzwingen</h2>
    
    <p>Failover wird automatisch vom Brightcove Live-System verwaltet und sollte kein Eingreifen Ihrerseits erfordern. Wenn Sie jedoch aus irgendeinem Grund ein Failover auf einen anderen Job erzwingen möchten, besteht die einfachste Möglichkeit darin, den Encoder des <code translate="No">on_air</code> Job.</p>
    
    <p>Sie können ein Failover auch mithilfe der API erzwingen, indem Sie a <code translate="No">PUT</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/switch</code></pre>
    
    <p>Der Anfragetext sieht so aus:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "mode": "manual",
      "on_air": "0ae5a4a71dc54b3181af0f98ee407c27"
    }</code></pre>
    
    <p>Hier, <code translate="No">mode</code> wird entweder <code translate="No">manual</code> oder <code translate="No">auto</code> (die Standardeinstellung) und die <code translate="No">on_air</code> hat einen Wert von einem der <strong>sekundär</strong> Job-IDs.</p>
    
    <p>Notiz: Einmal in <code translate="No">manual</code> Modus wird das automatische Job-Failover <strong>nicht</strong> auftreten. Du <strong>muss</strong> setze den Modus zurück auf <code translate="No">auto</code> damit das automatische Failover wieder aufgenommen wird. Sie können den On-Air-Job ändern, ohne in den manuellen Modus zu wechseln, indem Sie den Modus aus dem Hauptteil weglassen und den Force-Abfrageparameter hinzufügen <code translate="No">?force=true</code> auf Ihre Anfrage. Dadurch wird der Dienst gezwungen, Jobs zu wechseln, aber er kann jederzeit zurückwechseln, wenn er Probleme erkennt.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Ending_a_redundant_stream">Beenden eines redundanten Streams</h2>
    
    <p>Es gibt zwei Möglichkeiten, wie Sie Ihren redundanten Stream beenden können. Redundante Gruppen sind von Natur aus implizit <a href="/live-api/guides/live-api-static-entry-points.html">SEP</a> Ströme. Sie können eine Redundante Gruppe in <code translate="No">STANDBY</code> durch Entfernen aller Jobs aus der redundanten Gruppe.</p>
    
    <p>Um dies zu tun, verwenden Sie a <code translate="No">DELETE</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/jobs/{job_id}</code></pre>
    
    <p>für jeden Job, den Sie entfernen möchten. Beachten Sie, dass zum Entfernen des aktuellen Jobs <code translate="No">on_air</code> , müssen Sie die hinzufügen <code translate="No">?force-true</code> Abfrageparameter.</p>
    
    <p>Die zweite Möglichkeit, den Stream zu beenden, besteht darin, die redundante Gruppe vollständig zu löschen, indem Sie a <code translate="No">DELETE</code> Anfrage zu:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}</code></pre>
    </section>
    <section class="bcls-section">
      <h2 id="limitations">Einschränkungen</h2>
      <ul>
        <li>Live-Redundanz <strong>kann nicht</strong> mit DRM-geschützten Livestreams verwendet werden.</li>
      </ul>
    </section>
        </article>
    
 