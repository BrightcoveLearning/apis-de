---
title: 'Python-Code'
description: 'Dieses Thema enthält ein Python-Beispielskript zum Aufnehmen eines Videos mit der Dynamic Ingest API.'
parent: 'Code Samples' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>
    
    <p>REST-APIs wie die Brightcove-Plattform-APIs können mit jeder Sprache verwendet werden. Das hier enthaltene Python-Skript ist nur ein Beispiel, um Ihnen zu zeigen, wie Anfragen zusammengesetzt werden. Es gibt ein weiteres Beispiel für eine einfache GET-Anfrage (für die CMS-API) <a href="/cms/code-samples/cms-api-sample-python-code-get-request.html">Hier</a>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="dependencies">Abhängigkeiten</h2>
    
    <ul>
      <li><a href="https://python.readthedocs.io/en/latest/">Anfragen</a></li>
    </ul>
    </section>
    
    <section class="bcls-section" id="script">
    <h2>Python-Skript</h2>
    
    <p>Der folgende Code zeigt das Skript. Beachten Sie, dass Sie zur Verwendung Ihre eigenen Werte für Folgendes angeben müssen:</p>
    
    <ul>
      <li>***KONTO-ID HIER**** (Zeile 8)</li>
      <li>***KUNDEN-ID HIER**** (Zeile 9)</li>
      <li>***KUNDENGEHEIMNIS HIER**** (Zeile 10)</li>
      <li>***VIDEOTITEL HIER*** (Zeile 27)</li>
      <li>***QUELLE VIDEO URL HIER*** (Zeile 40)</li>
    </ul>
    
    <pre class="line-numbers">
    <code class="language-python" translate="No">#!/usr/bin/env python
    
    import sys
    import requests
    import json
    import argparse
    
    pub_id = "***ACCOUNT ID HERE****"
    client_id = "***CLIENT ID HERE****"
    client_secret = "***CLIENT SECRET HERE****"
    access_token_url = "https://oauth.brightcove.com/v4/access_token"
    profiles_base_url = "http://ingestion.api.brightcove.com/v1/accounts/{pubid}/profiles"
    
    def get_access_token():
        access_token = None
        r = requests.post(access_token_url, params="grant_type=client_credentials", auth=(client_id, client_secret), verify=False)
        if r.status_code == 200:
            access_token = r.json().get('access_token')
            print(access_token)
        return access_token
    
    def create_video():
        access_token = get_access_token()
        headers = { 'Authorization': 'Bearer ' + access_token, "Content-Type": "application/json" }
    
        url = ("https://cms.api.brightcove.com/v1/accounts/{pubid}/videos/").format(pubid=pub_id)
        data = '{"name": "***VIDEO TITLE HERE***"}'
        r = requests.post(url, headers=headers, data=data)
        return r.json()
    
    def submit_pbi(video_id):
        access_token = get_access_token()
        print access_token
        headers = { 'Authorization': 'Bearer ' + access_token, "Content-Type": "application/json" }
    
        url = ("https://ingest.api.brightcove.com/v1/accounts/{pubid}/videos/{videoid}/ingest-requests").format(pubid=pub_id, videoid=video_id)
        print url
    
        data = '''{
                "master": { "url": "****SOURCE VIDEO URL HERE***" }
             }'''
        r = requests.post(url, headers=headers, data=data)
        print r.headers
        return r.json()
    
    v = create_video()
    print v
    print submit_pbi(v['id'])</code></pre>
    </section>
    </article>
 