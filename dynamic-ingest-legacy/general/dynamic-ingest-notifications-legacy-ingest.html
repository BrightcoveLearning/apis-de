---
title: 'Dynamische Aufnahmebenachrichtigungen'
description: 'In diesem Thema erfahren Sie mehr über dynamische Aufnahmebenachrichtigungen, die Informationen zum Fortschritt Ihrer Aufnahmeaufträge bereitstellen. Beachten Sie, dass dieses Dokument nur für das Legacy-Ingest-System gilt - für Dynamic Delivery siehe <a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">Benachrichtigungen für dynamische Aufnahme</a> '
parent: 'General Information' 
grandparent: <span translate="No">Dynamische Aufnahme-API</span> Legacy-Layout: Inszenierung
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="diAPI">Dynamic Ingest API-Benachrichtigungen</h2>
    
    <p>Sie können eine oder mehrere Callback-URLs angeben, um Benachrichtigungen über die Ergebnisse des Aufnahmeprozesses zu erhalten. Die von Ihnen angegebenen URLs sollten für Apps gelten, die POST-Anforderungen akzeptieren können. Benachrichtigungen werden im JSON-Format gesendet.</p>
    
    <aside class="bcls-aside bcls-aside--information">
    <h3>Anmerkungen</h3>
    
    <ul>
      <li>Bis zu 10 Abonnenten für Fehlermeldungen werden unterstützt. Sie können mehr als 10 URLs angeben, an die Benachrichtigungen gesendet werden sollen, aber nur die ersten 10 werden verarbeitet</li>
      <li>URLs, die mit einem Schrägstrich (/) enden, werden nicht akzeptiert; zum Beispiel funktioniert die URL „https://my.domain.com/notification-receiver“, aber „https://my.domain.com/notification-receiver/“ nicht</li>
      <li>Alternativ können Sie die <a href="/cms/references/reference.html#api-videoGroup-Get_Status_of_Ingest_Jobs">Status-APIs der CMS-API</a> um den Status von Aufnahmeaufträgen für ein bestimmtes Video abzurufen.</li>
      <li>Benachrichtigungshandler auf Servern, die auf HTTP2 basieren, werden derzeit nicht unterstützt. An HTTP2-Server gesendete Benachrichtigungen können möglicherweise nicht zugestellt werden, ohne dass ein Fehler zurückgegeben wird.</li>
    </ul>
    </aside>
    
    <h3>Aufstellen</h3>
    
    <p>Hier ist ein Beispiel.</p>
    
    <ul>
      <li>Benutzer mit Pub-ID 57838016001</li>
      <li>Möchte Dynamic Ingest verwenden, um eine Quellvideodatei hochzuladen, die sich unter https://s3.amazonaws.com/bucket/mysourcevideo.mp4 befindet</li>
      <li>Möchte einen vorhandenen Titel im Katalog mit der Video-ID 5199670523001 hochladen</li>
      <li>Verwenden des hochauflösenden Profils</li>
      <li>Möchte Rückrufe an zwei Endpunkten empfangen, die sich unter http://host1/path1 bzw. http://host2/path2 befinden</li>
    </ul>
    
    <p>Die DI-Anfrage würde so aussehen:</p>
    
    <h4>POST-Anfrage</h4>
    <textarea class="bcls-code">https://ingest.api.brightcove.com/v1/accounts/57838016001/videos/5199670523001/ingest-requests</textarea>
    
    <h4>Anfragetext</h4>
    <textarea class="bcls-code" style="height:10em;">{ "master": { "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4" }, "profile": "hochauflösend", "callbacks": ["http://host1/path1", "http://host2/path2"] }
        </textarea>
    
    <h3>Musterbenachrichtigung</h3>
    
    <p>Benachrichtigungen werden als POST-Anforderungen gesendet, wobei die Benachrichtigung im Anforderungstext als JSON <sup> <strong> <a href="#note1">[1]</a> </strong> </sup>. Hier sind einige Beispielbenachrichtigungen:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "accountId": "57838016001",
        "entityType": "ASSET",
        "version": "1",
        "status": "SUCCESS",
        "videoId": "5199670523001",
        "entity": "5199679295001",
        "action": "CREATE",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "action": "CREATE",
        "status": "SUCCESS",
        "entityType": "DIGITAL_MASTER",
        "videoId": "5199670523001",
        "entity": "5199670523001",
        "accountId": "57838016001",
        "version": "1",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "entityType": "ASSET",
        "status": "SUCCESS",
        "action": "CREATE",
        "entity": "5199680423001",
        "profileRefId": "ts7",
        "version": "1",
        "accountId": "57838016001",
        "videoId": "5199670523001",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd",
        "accountId": "57838016001",
        "version": "1",
        "status": "SUCCESS",
        "entityType": "TITLE",
        "entity": "5199670523001",
        "videoId": "5199670523001",
        "action": "CREATE"
    }</code></pre>
    
    <h4>Anmerkungen</h4>
    
    <ul>
      <li id="note1"><sup>[1]<strong></strong> </sup> Ausnahme: Alle Benachrichtigungen für DRM-verpackte Inhalte werden als Schlüssel/Wert-Paare zurückgegeben. In diesem Fall ist die <code translate="No">Content-Type</code> Kopfzeile wird sein <code translate="No">application/x-www-form-urlencoded</code>. Ansonsten der <code translate="No">Content-Type</code> wird sein <code translate="No">application/json</code></li>
    </ul>
    
    <h3>Benachrichtigungsfelder</h3>
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Artikel</th>
          <th>Beschreibung</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">status</code></td>
          <td>wird sein <code translate="No">FAILED</code> wenn die Aufnahme oder Erstellung einer Wiedergabe nicht erfolgreich war, <code translate="No">SUCCESS</code> wenn die Anfrage erfolgreich war</td>
        </tr>
        <tr>
          <td><code translate="No">accountId</code></td>
          <td>die Konto-ID</td>
        </tr>
        <tr>
          <td><code translate="No">videoId</code></td>
          <td>die Video-ID</td>
        </tr>
        <tr>
          <td><code translate="No">jobId</code></td>
          <td>die Job-ID für die Dynamic Ingest-Anfrage</td>
        </tr>
        <tr>
          <td style="vertical-align:top;"><code translate="No">profileRefId</code></td>
          <td>
          <p>Für Videowiedergaben ist dies die <code translate="No">reference id</code> Sie für die Wiedergabe in Ihrem Aufnahmeprofil angegeben haben.</p>
    
          <p>Für Manifeste ist die <code translate="No">profileRefId</code> gibt den Typ des Manifests an:</p>
    
          <ul>
            <li><code translate="No">HlsManifest</code> für ein HLS NG-Manifest</li>
            <li><code translate="No">HdsManifest</code> für ein HDS-Manifest</li>
            <li><code translate="No">DashManifest</code> für DASH-Manifeste (2 - eines der Manifest-Assets wird für die Nutzung in der MAPI verwendet, das andere wird für die Nutzung in der CMS-API verwendet)</li>
            <li><code translate="No">SmoothIsmManifest</code> für ein Smooth-Manifest (2 - eines der Manifest-Assets wird für die Nutzung in der MAPI verwendet, das andere wird für die Nutzung in der CMS-API verwendet)</li>
          </ul>
          </td>
        </tr>
        <tr>
          <td><code translate="No">entity</code></td>
          <td>falls vorhanden, die Video Cloud-ID des Assets, das aufgenommen wurde oder fehlgeschlagen ist (wenn das Videoobjekt erfolgreich in Video Cloud erstellt wurde)</td>
        </tr>
        <tr>
          <td><code translate="No">entityType</code></td>
          <td>die Art des Vermögenswertes, über den gemeldet wird - zum Beispiel: TITLE (ein Video), DIGITAL_MASTER, ASSET (eine Wiedergabe, eine Untertiteldatei oder ein Bild)</td>
        </tr>
        <tr>
          <td><code translate="No">errorMessage</code></td>
          <td>eine Erklärung, warum die Aufnahme fehlgeschlagen ist, wenn dies der Fall ist</td>
        </tr>
        <tr>
          <td><code translate="No">version</code></td>
          <td>eine Zeichenfolge immer gleich <code translate="No">"1"</code></td>
        </tr>
        <tr>
          <td><code translate="No">action</code></td>
          <td>die aufgetretene Aktion - zum Beispiel CREATE</td>
        </tr>
      </tbody>
    </table>
    
    <h3>Benachrichtigungen interpretieren</h3>
    
    <p>Eine Benachrichtigung mit <code translate="No">"action": "CREATE"</code> und <code translate="No">"status": "SUCCESS"</code> zeigt den Abschluss eines Prozesses an.</p>
    
    <ul>
      <li>Wenn die <code translate="No">entityType</code> ist <code translate="No">TITLE</code> , dann ist die Verarbeitung eines aufgenommenen Videos abgeschlossen.</li>
      <li>Wenn die <code translate="No">entityType</code> ist <code translate="No">ASSET</code> , dann wurde Ihrem Video erfolgreich eine Wiedergabe-, Bild-, Manifest- oder WebVTT-Datei hinzugefügt.</li>
    </ul>
    
    <p class="BCL-aside">Kein Tee <code translate="No">"status": "SUCCESS"</code> auf einen <strong>Titel</strong> zeigt an, dass die Verarbeitung abgeschlossen ist, bedeutet jedoch nicht unbedingt, dass alle Darstellungen erfolgreich erstellt wurden. Um festzustellen, ob die dynamische Aufnahme von Videos erfolgreich war, siehe <a href="/dynamic-ingest/general/get-status-dynamic-ingest-requests-dynamic-delivery.html">Status dynamischer Ingest-Anfragen abrufen</a></p>
    </section>
    
    <section class="bcls-section">
    <h2 id="sampleApp">Einfache Beispiel-App</h2>
    
    <p>Unten ist der Code für eine einfache Protokollierungs-App für <span translate="No">Dynamische Aufnahme-API</span> Benachrichtigung. Diese App ist in PHP geschrieben, Sie können jedoch jede Sprache verwenden, solange die App über eine öffentlich zugängliche URL verfügt und http(s) POST-Anfragen verarbeiten kann.</p>
    
    <p>Sie können die Protokolldatei sehen, die diese App generiert <a href="//solutions.brightcove.com/bcls/di-api/di-log.txt">Hier.</a></p>
    
    <p class="BCL-aside">Hinweis: Wenn Sie versuchen, diese App für sich selbst zu implementieren, müssen Sie sicherstellen, dass die App berechtigt ist, in Ihre Protokolldatei zu schreiben. Denken Sie auch daran, dass die Protokolldatei schnell anwachsen kann - Sie werden sie wahrscheinlich regelmäßig leeren möchten.</p>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;?php // POST funktioniert nicht für JSON-Daten $problem = "Keine Fehler"; Versuchen { $json = file_get_contents('php://input'); $decoded = json_decode($json, true); } catch (Ausnahme $e) { $problem = $e-&gt;getMessage(); } // Benachrichtigung in hübsch gedrucktes JSON umwandeln $notification = json_encode($decoded, JSON_PRETTY_PRINT); $logEntry = $Benachrichtigung. "\\nFehler beim Empfangen von Benachrichtigungen: ".$problem. "\\n-------------------------------\\n"; // Schließlich teilen Sie PHP mit, wo es die Protokolldatei finden kann, und weisen Sie PHP an, sie zu öffnen // und den zuvor erstellten String hinzuzufügen. $logFileLocation = "di-log.txt"; $fileHandle = fopen($logFileLocation, 'a') or die("-1"); fwrite($fileHandle, $logEntry); fclose($fileHandle); // Zeile darunter wird angezeigt, wenn Sie die App direkt durchsuchen echo "Dynamic Ingest Callback App is running"; ?&gt; </code></pre>
    </section>
    </article>
 