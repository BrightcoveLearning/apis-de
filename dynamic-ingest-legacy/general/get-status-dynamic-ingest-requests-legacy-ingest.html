---
title: 'Status der Anfragen abrufen'
description: 'Wenn Sie das verwenden <span translate="No">Dynamische Aufnahme-API</span> Um Videos zu Ihrem Video Cloud-Konto hinzuzufügen, möchten Sie vor allem wissen, wann das Video verarbeitet wurde und ob die Wiedergabeversionen erfolgreich erstellt wurden. In diesem Dokument wird erklärt, wie Sie dies mithilfe von . tun können <span translate="No">Dynamische Aufnahme-API</span> Benachrichtigungen. Wir bieten auch eine Beispiel-Dashboard-App, die den Prozess automatisiert. Beachten Sie, dass dieses Dokument nur für das Legacy-Ingest-System gilt - für Dynamic Delivery siehe <a href="/dynamic-ingest/general/get-status-dynamic-ingest-requests-dynamic-delivery.html">Status dynamischer Ingest-Anfragen abrufen</a> '
parent: 'General Information' 
grandparent: <span translate="No">Dynamische Aufnahme-API</span> Legacy-Layout: Inszenierung
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section" id="dataSources">
    <h2>Abrufen der Daten</h2>
    
    <p>Die Dynamic Ingest-Benachrichtigungen geben Ihnen alle Informationen, die Sie wissen müssen, wenn Ihr Video fertig ist - Sie müssen nur wissen, wonach Sie suchen müssen ... und definieren, was "bereit" für Ihre Systeme bedeutet. Dieses Diagramm fasst den Arbeitsablauf zusammen:</p>
    
    <figure class="bcls-figure"><img class="bcls-image" alt="Ingest Status Workflow" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/general-information/di-status/ingestion-status-architecture.svg" />
    <figcaption class="bcls-caption--image">Workflow zum Aufnahmestatus</figcaption>
    </figure>
    </section>
    
    <section id="Dynamic_Ingest_Notifications" class="bcls-section">
    <h2>Dynamische Aufnahmebenachrichtigungen</h2>
    
    <p>Der Dynamic Ingest-Benachrichtigungsdienst sendet Ihnen Benachrichtigungen für verschiedene Arten von Ereignissen. Die drei, die am nützlichsten sind, um herauszufinden, wann das Video "bereit" ist, sind diejenigen, die anzeigen, dass bestimmte Wiedergaben erstellt wurden, diejenigen, die anzeigen, dass ein Manifest erstellt wurde, und eine, die anzeigt, dass die gesamte Verarbeitung abgeschlossen ist. Hier sind jeweils Beispiele:</p>
    
    <h3>Benachrichtigung über Wiedergabe erstellt</h3>
    
    <figure class="bcls-figure">
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "entity": "5002412132001",
        <span class="bcls-highlight">"profileRefId": "ts7",</span>
        "accountId": "57838016001",
        "entityType": "ASSET",
        <span class="bcls-highlight">"videoId": "5002361893001",</span>
        <span class="bcls-highlight">"status": "SUCCESS",</span>
        "version": "1",
        "action": "CREATE",
        "jobId": "bb316631-c58b-4bd4-a686-13c5f7a3a779"
    }</code></pre>
    
    <figcaption class="bcls-caption--image">Benachrichtigung für Wiedergabe erstellt</figcaption>
    </figure>
    
    <p>Beachten Sie in diesem Beispiel:</p>
    
    <ul>
      <li>Die <code translate="No">videoId</code> value gibt an, für welches Video die Wiedergabe bestimmt ist (falls mehrere Ingest-Jobs ausgeführt werden)</li>
      <li>Die <code translate="No">profileRefId</code> value ist die Referenz-ID für die im Aufnahmeprofil angegebene Wiedergabeversion</li>
      <li>wenn die <code translate="No">status</code> Wert ist "SUCCESS", die Wiedergabe wurde erfolgreich erstellt</li>
      <li>Bei einem segmentierten Typ wie HLS oder MPEG-DASH macht das Vorhandensein der Wiedergabe es nicht spielbar - Sie benötigen auch das entsprechende Manifest (siehe nächstes Beispiel). MP4-Wiedergaben sind abspielbar, sobald sie erstellt wurden.</li>
    </ul>
    
    <h3>Manifest erstellte Benachrichtigung</h3>
    
    <figure class="bcls-figure">
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "jobId": "31f0b112-9890-4567-adb5-0f4ed1673701",
        <span class="bcls-highlight">"status": "SUCCESS",</span>
        "version": "1",
        "action": "CREATE",
        "entityType": "ASSET",
        "entity": "5002412528001",
        <span class="bcls-highlight">"videoId": "5002361895001",</span>
        <span class="bcls-highlight">"profileRefId": "HlsManifest",</span>
        "accountId": "57838016001"
    }</code></pre>
    
    <figcaption class="bcls-caption--image">Benachrichtigung für Manifest erstellt</figcaption>
    </figure>
    
    <p>Beachten Sie in diesem Beispiel:</p>
    
    <ul>
      <li>Die <code translate="No">videoId</code> value gibt an, für welches Video die Wiedergabe bestimmt ist (falls mehrere Ingest-Jobs ausgeführt werden)</li>
      <li>Die <code translate="No">profileRefId</code> value ist ein spezieller Code, der Ihnen mitteilt, dass das erstellte Asset ein HLS-Manifest war (die anderen möglichen Werte sind <code translate="No">HdsManifest</code> , <code translate="No">DashManifest</code> , und <code translate="No">SmoothIsmManifest</code>)</li>
      <li>Für HLS und HDS wird ein Manifest erstellt, sodass Sie eine Benachrichtigung sehen. Für DASH und SmoothIsm werden zwei Manifeste erstellt (eines für die Verwendung in der alten Medien-API, das andere für die CMS-API), sodass Sie zwei Benachrichtigungen dieses Typs sehen.</li>
      <li>Wenn die <code translate="No">status</code> Wert ist "SUCCESS", das Manifest wurde erfolgreich erstellt</li>
      <li>Für einen segmentierten Typ wie HLS oder MPEG-DASH gibt es keine eindeutige Reihenfolge für die Erstellung der Darstellungen und des Manifests – diese Darstellungen können erst abgespielt werden, wenn beide erstellt wurden (oder das Video vollständig verarbeitet wurde – siehe nächstes Beispiel).</li>
    </ul>
    
    <h3>Bearbeitung der vollständigen Benachrichtigung</h3>
    
    <figure class="bcls-figure">
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        <span class="bcls-highlight">"entityType": "TITLE",</span>
        <span class="bcls-highlight">"status": "SUCCESS",</span>
        "accountId": "57838016001",
        "entity": "5002412652001",
        "action": "CREATE",
        "jobId": "3e98b3a0-f624-4f2d-81c1-4e43e1d04a0f",
        "version": "1",
        <span class="bcls-highlight">"videoId": "5002412652001"</span>
    }</code></pre>
    
    <figcaption class="bcls-caption--image">Benachrichtigung zur Verarbeitung abgeschlossen</figcaption>
    </figure>
    
    <p>Beachten Sie in diesem Beispiel:</p>
    
    <ul>
      <li>Die <code translate="No">videoId</code> value gibt an, für welches Video die Wiedergabe bestimmt ist (falls mehrere Ingest-Jobs ausgeführt werden)</li>
      <li>Die <code translate="No">profileRefId</code> ist <strong>nicht</strong> in dieser Benachrichtigung enthalten</li>
      <li>Wenn die <code translate="No">status</code> Wert ist "SUCCESS", das Video wurde erfolgreich verarbeitet</li>
    </ul>
    
    <p>Um Benachrichtigungen zu erhalten, müssen Sie ein Feld "Rückrufe" in Sie einfügen <span translate="No">Dynamische Aufnahme-API</span> Anfragen, die auf eine oder mehrere Rückrufadressen verweisen:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "master": {
            "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4"
        }, "profile": "high-resolution",
        <strong>"callbacks": ["http://host1/path1”, “http://host2/path2”]</strong>
    }</code></pre>
    </section>
    
    <section class="bcls-section" id="sample">
    <h2>Beispiel-Dashboard</h2>
    
    <p>In diesem Abschnitt wird erläutert, wie Benachrichtigungen zusammengestellt werden können, um ein einfaches Dashboard für die Dynamic Ingest API zu erstellen. Der Handler für Benachrichtigungen parst Benachrichtigungen vom <span translate="No">Dynamische Aufnahme-API</span> um die Verarbeitung vollständiger Benachrichtigungen zu identifizieren. Anschließend werden die Videobenachrichtigungen für jedes Video in einer JSON-Datei einem Array von Objekten hinzugefügt. Das Dashboard selbst ist eine HTML-Seite, die die JSON-Datei importiert, um die Benachrichtigungsdaten abzurufen. Es verwendet die IDs, um eine Anfrage an die . zu richten <a href="/cms/getting-started/overview-cms-api.html">CMS-API</a> um die Video-Metadaten abzurufen. Sie können das Dashboard anzeigen <a href="//solutions.brightcove.com/bcls/di-api/di-log.html">Hier</a>.</p>
    
    <p>Alle Dateien für diese App sowie Anweisungen zum Einrichten für Ihr Konto sind in <a href="https://github.com/BrightcoveLearning/dynamic-ingest-dashboard">dieses Repository</a>.</p>
    
    <p>Hier ist die High-Level-Architektur der App:</p>
    
    <figure class="bcls-figure"><img class="bcls-image" alt="Ingest Dashboad Architecture" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/general-information/di-status/ingestion-dashboard-architecture.svg" />
    <figcaption class="bcls-caption--image">Dashboard-Architektur aufnehmen</figcaption>
    </figure>
    
    <h3>Die App-Teile</h3>
    
    <p>Der Handler für Benachrichtigungen ist in PHP integriert - er sucht nach der Verarbeitung vollständiger Benachrichtigungen und fügt die Video-ID zu einem Array in einer separaten JavaScript-Datei hinzu:</p>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;?php // var zum Protokollieren von Fehlern, falls vorhanden $problem = "Keine Fehler"; // var zum Speichern des aktuellen Videoindex $videoIndex = -1; // Eingabedaten abrufen versuchen { $json = file_get_contents('php://input'); $decoded = json_decode($json, true); } catch (Ausnahme $e) { $problem = $e-&gt;getMessage(); echo $problem; } // Holen Sie sich den Inhalt der Datendatei und analysieren Sie sie try { $notificationData = file_get_contents('di.json'); $notificationDataDecoded = json_decode($notificationData, true); } catch (Ausnahme $e) { $problem = $e-&gt;getMessage(); echo $problem; } if (isset($decoded["entityType"])) { $entityType = $decoded["entityType"]; // if the entity type is ASSET or TITLE, add it to notification data array if ($entityType == "ASSET" || $entityType == "TITLE") { array_push($notificationDataDecoded, $decoded); } // jetzt ersetzen wir den Inhalt von di.json mit dem, was wir haben file_put_contents('di.json', json_encode($notificationDataDecoded)); } echo "Dynamische Ingest-Callback-App wird ausgeführt"; var_dump($notificationData); ?&gt; </code></pre>
    
    <h4>JSON-Datei:</h4>
    
    <p>Die JSON-Datei ist zunächst ein leeres Array (<code translate="No">[]</code> ) - Daten werden vom Benachrichtigungshandler hinzugefügt.</p>
    
    <h4>Armaturenbrett</h4>
    
    <p>Das Dashboard enthält HTML und JavaScript zum Abrufen der Benachrichtigungsdaten und zusätzlicher Videodaten aus dem <span translate="No">CMS-API</span> und schreibe die Ergebnisse in eine Tabelle:</p>
    
    <pre class="line-numbers">
    <code class="language-html" translate="No">&lt;!DOCTYPE html&gt;
    &lt;html&gt;
        &lt;head&gt;
            &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
            &lt;title&gt;Dynamic Ingest Log&lt;/title&gt;
            &lt;style&gt;
                body {
                    font-family: sans-serif;
                    margin: 5em;
                }
                .hide {
                    display: none;
                }
                .show {
                    display: block;
                }
                table {
                    border-collapse: collapse;
                    border: 1px #999999 solid;
                }
                th {
                    background-color: #666666;
                    color: #f5f5f5;
                    padding: .5em;
                    font-size: .7em;
                }
                td {
                    border: 1px #999999 solid;
                    font-size: .7em;
                    padding: .5em
                }
                .hidden {
                    display: none;
                }
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;h1&gt;Dynamic Ingest Log&lt;/h1&gt;
            &lt;h2&gt;Account: Brightcove Learning (57838016001)&lt;/h2&gt;
            &lt;p style="width:70%"&gt;
                Videos are listed in order of processing completion time, newest to oldest. The reference id (generated by the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;) is a combination of the date/time that the Dynamic Ingest job was initiated and the ingest profile that was used. You can add additional videos using the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;. New videos will appear in this log after processing is complete.
            &lt;/p&gt;
            &lt;p&gt;
                &lt;button id="clearLogBtn"&gt;Clear the log&lt;/button&gt;
            &lt;/p&gt;
            &lt;div id="videoLogBlock"&gt;
                &lt;table&gt;
                    &lt;thead&gt;
                        &lt;tr&gt;
                            &lt;th&gt;Video ID&lt;/th&gt;
                            &lt;th&gt;Name&lt;/th&gt;
                            &lt;th&gt;Reference ID&lt;/th&gt;
                            &lt;th&gt;HLS Manifests Created&lt;/th&gt;
                            &lt;th&gt;HLS Renditions Created&lt;/th&gt;
                            &lt;th&gt;MP4 Renditions Created&lt;/th&gt;
                            &lt;th&gt;Processing Complete&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody id="logBody"&gt;&lt;/tbody&gt;
                &lt;/table&gt;
                &lt;h4 id="loadingMessage"&gt;Loading data, please wait...&lt;/h4&gt;
            &lt;/div&gt;
            &lt;script&gt;
            var BCLS = ( function (window, document) {
                // to use another account, set the account_id value appropriately
                // the client_id and client_secret will also need to be changed in the proxy
                var my_account_id = 57838016001,
                    account_id = my_account_id,
                    logBody = document.getElementById('logBody'),
                    loadingMessage = document.getElementById('loadingMessage'),
                    clearLogBtn = document.getElementById('clearLogBtn'),
                    i = 0,
                    iMax,
                    // set the proxyURL to the location of the proxy app that makes Brightcove API requests
                    proxyURL = './brightcove-learning-proxy.php',
                    dataFileURL = './di.json',
                    videoDataArray = [],
                    requestOptions = {},
                    currentVideo,
                    currentIndex = 0;
    
                    /**
                     * Logging function - safe for IE
                     * @param  {string} context - description of the data
                     * @param  {*} message - the data to be logged by the console
                     * @return {}
                     */
                    function bclslog(context, message) {
                        if (window["console"] &amp;&amp; console["log"]) {
                          console.log(context, message);
                        }
                        return;
                    }
    
                    /**
                     * tests for all the ways a variable might be undefined or not have a value
                     * @param {*} x the variable to test
                     * @return {Boolean} true if variable is defined and has a value
                     */
                    function isDefined(x) {
                        if ( x === '' || x === null || x === undefined || x === NaN) {
                            return false;
                        }
                        return true;
                    }
    
                    /**
                     * find index of an object in array of objects
                     * based on some property value
                     *
                     * @param {array} targetArray - array to search
                     * @param {string} objProperty - object property to search
                     * @param {string|number} value - value of the property to search for
                     * @return {integer} index of first instance if found, otherwise returns null
                     */
                    function findObjectInArray(targetArray, objProperty, value) {
                        var i, totalItems = targetArray.length, objFound = false;
                        for (i = 0; i &lt; totalItems; i++) {
                            if (targetArray[i][objProperty] === value) {
                                objFound = true;
                                return i;
                            }
                        }
                        if (objFound === false) {
                            return null;
                        }
                    }
    
                    /**
                     * factory for new video objects
                     * @param {String} videoId the video id
                     * @return {object} the new object
                     */
                    function makeVideoDataObject(videoId) {
                        var obj = {};
                        obj.id = videoId;
                        obj.name = '';
                        obj.reference_id = '';
                        obj.hlsManifests = 0;
                        obj.hlsRenditions = 0;
                        obj.mp4Renditions = 0;
                        obj.complete = 'no';
                        return obj;
                    }
    
                    /**
                     * processes notification objects
                     * creates a new object in the videoDataArray if it doesn't exist
                     * and updates the videoDataArray object based on the notification
                     * @param {Object} notificationObj the raw notification object
                     */
                    function processNotification(notificationObj) {
                        var objIndex, videoObj;
                        // if notification object contains a video id, find the corresponding
                        // object in the videoDataArray or create it if it's not there
                        if (isDefined(notificationObj) &amp;&amp; isDefined(notificationObj.videoId)) {
                            objIndex = findObjectInArray(videoDataArray, 'id', notificationObj.videoId);
                            // if not found, create one
                            if (!isDefined(objIndex)) {
                                videoObj = makeVideoDataObject(notificationObj.videoId);
                                videoDataArray.push(videoObj);
                                objIndex = videoDataArray.length - 1;
                            }
                            // now update properties based on what's in the notification
                            if (notificationObj.entityType === 'ASSET') {
                                // if it's a rendition or manifest, there will be a profileRefId
                                if (isDefined(notificationObj.profileRefId)) {
                                    // see if it's an HLS manifest
                                    if (notificationObj.profileRefId === 'HlsManifest') {
                                        // increment the hls manifest count
                                        videoDataArray[objIndex].hlsManifests++;
                                    } else if (notificationObj.profileRefId.charAt(0) === 't') {
                                        // increment the hls rendition count
                                        videoDataArray[objIndex].hlsRenditions++;
                                    } else if (notificationObj.profileRefId.charAt(0) === 'm') {
                                        // increment the mp4 rendition count
                                        videoDataArray[objIndex].mp4Renditions++;
                                    }
                                }
                            } else if (notificationObj.entityType === 'TITLE') {
                                // overall processing notification - checked for SUCCESS / FAILED
                                if (notificationObj.status === 'SUCCESS') {
                                    // mark complete
                                    videoDataArray[objIndex].complete = 'yes';
                                } else if (notificationObj.status === 'FAILED') {
                                    // mark failed
                                    videoDataArray[objIndex].complete = 'failed';
                                }
                            }
                        }
                        return;
                    }
    
                    /**
                     * creates the dashboard table body
                     */
                    function writeReport() {
                        var j,
                            jMax = videoDataArray.length,
                            item,
                            t;
                        loadingMessage.textContent = 'This page will refresh in 1 minute...';
                        /* just showing HLS and MP4 renditions, because
                         * that's all that will be produced in this account,
                         * but you could modify the notification handler and
                         * this page to handle other formats
                         */
                        for (j = 0; j &lt; jMax; j++) {
                            item = videoDataArray[j];
                            if (item.id !== undefined) {
                                logBody.innerHTML += '&lt;tr&gt;&lt;td&gt;' + item.id + '&lt;/td&gt;&lt;td&gt;' + item.name + '&lt;/td&gt;&lt;td&gt;' + item.reference_id + '&lt;/td&gt;&lt;td&gt;' + item.hlsManifests + '&lt;/td&gt;&lt;td&gt;' + item.hlsRenditions + '&lt;/td&gt;&lt;td&gt;' + item.mp4Renditions + '&lt;/td&gt;&lt;td&gt;' + item.complete + '&lt;/td&gt;&lt;/tr&gt;';
                            }
                        }
                        // set timeout for refresh
                        t = window.setTimeout(init, 60000);
                    };
    
                    // function to set up the notification data request
                    function setJSONRequestOptions() {
                        submitRequest(null, dataFileURL, 'notificationData');
                    }
    
                    // function to set up video data request
                    function setVideoRequestOptions() {
                        requestOptions = {};
                        requestOptions.url = 'https://cms.api.brightcove.com/v1/accounts/' + account_id + '/videos/' + currentVideo.id;
                        submitRequest(requestOptions, proxyURL, 'video');
                    }
    
                    /**
                     * initiates the <span translate="No">CMS API</span> requests
                     */
                    function getVideoInfo() {
                        iMax = videoDataArray.length;
                        if (currentIndex &lt; iMax) {
                            currentVideo = videoDataArray[currentIndex];
                            setVideoRequestOptions();
                        } else {
                            loadingMessage.innerHTML = 'No videos have been ingested - you can add some using the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;';
                        }
                    }
    
                    /**
                     * make the <span translate="No">CMS API</span> requests
                     * @param {Object} options request options
                     * @param (String) url URL to send request to
                     * @param (String) type the request type
                     */
                    function submitRequest(options, url, type) {
                        var httpRequest = new XMLHttpRequest(),
                            requestData,
                            responseData,
                            videoDataObject,
                            parsedData,
                            getResponse = function () {
                                try {
                                    if (httpRequest.readyState === 4) {
                                      if (httpRequest.status === 200) {
                                        responseData = httpRequest.responseText;
                                        switch (type) {
                                            case 'notificationData':
                                            var k, kMax, dataArray;
                                            dataArray = JSON.parse(responseData);
                                            bclslog('dataArray', dataArray);
                                            // process the notifications
                                            kMax = dataArray.length;
                                            for (k = 0; k &lt; kMax; k++) {
                                                processNotification(dataArray[k]);
                                            }
                                            getVideoInfo();
                                            break;
                                            case 'video':
                                            parsedData = JSON.parse(responseData);
                                            bclslog('parsedData', parsedData);
                                            videoDataArray[currentIndex].reference_id = parsedData.reference_id;
                                            videoDataArray[currentIndex].name = parsedData.name;
                                            currentIndex++;
                                            if (currentIndex &lt; iMax) {
                                                currentVideo = videoDataArray[currentIndex];
                                                setVideoRequestOptions();
                                            } else {
                                                writeReport();
                                            }
                                            break;
                                        }
                                      } else {
                                        bclslog("There was a problem with the request. Request returned " + httpRequest.status);
                                        if (type === 'video') {
                                            setVideoRequestOptions();
                                        } else {
                                            setSourcesRequestOptions();
                                        }
                                      }
                                    }
                                  }
                                  catch(e) {
                                    bclslog('Caught Exception: ' + e);
                                  }
                            };
                        // notifications data is a special case
                        if (type === 'notificationData') {
                            // set response handler
                            httpRequest.onreadystatechange = getResponse;
                            // open the request
                            httpRequest.open("GET", url);
                            // set headers
                            httpRequest.setRequestHeader("Content-Type", "application/json");
                            // open and send request
                            httpRequest.send();
                        } else {
                            // requests via proxy
                            // set up request data
                            requestData = "url=" + encodeURIComponent(options.url) + "&amp;requestType=GET";
                            // set response handler
                            httpRequest.onreadystatechange = getResponse;
                            // open the request
                            httpRequest.open("POST", url);
                            // set headers
                            httpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                            // open and send request
                            httpRequest.send(requestData);
                        }
                    };
    
                    // event handlers
                    clearLogBtn.addEventListener('click', function () {
                        if (window.confirm('Are you sure? This action cannot be undone!')) {
                            // if your clear-log app resides in another location, change the URL
                            window.location.href = 'clear-log.php';
                        }
                    });
    
                    // get things started
                    function init() {
                        // clear table and the video data array
                        logBody.innerHTML = "";
                        videoDataArray = [];
                        setJSONRequestOptions();
                    }
                    // kick off the app
                    init();
                })(window, document);
            &lt;/script&gt;
        &lt;/body&gt;
    &lt;/html&gt;
    </code></pre>
    
    <aside class="bcls-aside bcls-aside--tip">Hier müssen Sie eine Designentscheidung treffen: Sie können den Benachrichtigungshandler oder das Dashboard (oder eine Kombination aus beiden) verwenden, um die Benachrichtigungen zu verarbeiten und die nützlichen Informationen zu extrahieren. Bei dieser Art von App bevorzugen wir es, den Benachrichtigungs-Handler einfach zu halten, indem wir ihn nur zur Weitergabe der Benachrichtigungsdaten verwenden und die Client-App (in diesem Fall das Dashboard) die Informationsverarbeitung übernehmen lassen. Dies erfordert mehr Verarbeitung auf dem Client, macht den Benachrichtigungshandler jedoch wiederverwendbarer.</aside>
    
    <h4>Stellvertreter</h4>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;?php /** * brightcove-learning-proxy.php - Proxy für Brightcove RESTful APIs * erhält ein Zugriffstoken, stellt die Anfrage und gibt die Antwort zurück * Zugriff: * URL: https://solutions.brightcove.com/ bcls/bcls-proxy/bcsl-proxy.php * (Beachten Sie, dass Sie *immer* über HTTPS auf den Proxy zugreifen sollten) * Methode: POST * * @post {string} url - die URL für die API-Anfrage * @post {string} [requestType=GET] - HTTP-Methode für die Anfrage * @post {string} [requestBody=null] - JSON-Daten, die mit Schreibanfragen gesendet werden sollen * * @returns {string} $response - Von der API erhaltene JSON-Antwort */ // CORS enablement header("Access-Control-Allow-Origin: *"); // Anforderung für Zugriffstoken einrichten $data = array(); // // Ändern Sie die Werte unten, um diesen Proxy mit einem anderen Konto zu verwenden // $client_id = "YOUR_CLIENT_ID_HERE"; $client_secret = "IHR_CLIENT_SECRET_HERE"; $auth_string = "{$client_id}:{$client_secret}"; $request = "https://oauth.brightcove.com/v4/access_token?grant_type=client_credentials"; $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_POST =&gt; TRUE, CURLOPT_RETURNTRANSFER =&gt; TRUE , CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_USERPWD =&gt; $auth_string, CURLOPT_HTTPHEADER =&gt; array( 'Inhaltstyp: Anwendung/x-www-form-urlencoded', ), CURLOPT_POSTFIELDS =&gt; $data )); $_response($ch ); curl_close($ch); // Auf Fehler prüfen if ($response === FALSE) { die(curl_error($ch)); } // Antwort entschlüsseln $responseData = json_decode($response, TRUE); $access_token = $responseData["access_token"]; // API-Aufruf einrichten // Daten abrufen if ($_POST["requestBody"]) { $data = json_decode($_POST["requestBody"]); } anders { $data = array(); } // Anfragetyp abrufen oder standardmäßig GET verwenden if ($_POST["requestType"]) { $method = $_POST["requestType"]; } anders { $method = "GET"; } // Holen Sie sich die URL und die Autorisierungsinformationen aus den Formulardaten $request = $_POST["url"]; //die http-Anfrage senden $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Inhaltstyp: Anwendung/json:', "Autor Träger {$access_token}", ), CURLOPT_POSTFIELDS =&gt; json_encode($data) )); $response = curl_exec($ch); curl_close($ch); // Auf Fehler prüfen if ($response === FALSE) { echo "Error: "+$response; die(curl_error($ch)); } // Antwort entschlüsseln // $responseData = json_decode($response, TRUE); // die Antwort an den AJAX-Aufrufer zurückgeben echo $response; ?&gt; </code></pre>
    
    <h4>Löschen Sie das Protokoll</h4>
    
    <p>Diese einfache PHP-App stellt einfach die JavaScript-Datei in ihren ursprünglichen Zustand zurück und löscht die alten Video-IDs:</p>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;?php $logFileLocation = "di.json"; $freshContent = array(); $encodedContent = json_encode($freshContent); file_put_contents($logFileLocation, $encodedContent); echo 'Protokolldatei gelöscht - &lt;a href="di-log.html"&gt;zurück zum Dashboard&lt;/a&gt;'; ?&gt; </code></pre>
    </section>
    </article>
 